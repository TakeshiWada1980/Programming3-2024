<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=yes"
    />
    <meta name="robots" content="noindex,nofollow,noarchive" />
    <meta name="referrer" content="no-referrer" />

    <script>
      MathJax = {
        chtml: {
          displayAlign: "left",
          displayIndent: "1em",
        },
      };
    </script>

    

    <link rel="icon" href="favicon.ico" sizes="any" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c"
    />
    <link rel="stylesheet" href="style.css" />

    <title>第06回 3I-プログラミング3</title>
  </head>

  <body>
    <div class="openbtn"><span></span><span></span><span></span></div>
    <nav id="g-nav">
      <div id="g-nav-list">
        <!-- ---------------------------------------- -->
         <ul>
<li><a href="#連絡" id="toc-連絡"><span
class="toc-section-number">1</span> 連絡</a></li>
<li><a href="#バックエンド処理を含めたブログアプリの開発"
id="toc-バックエンド処理を含めたブログアプリの開発"><span
class="toc-section-number">2</span>
バックエンド処理を含めたブログアプリの開発</a></li>
<li><a href="#next.js-の-開発環境構築"
id="toc-next.js-の-開発環境構築"><span
class="toc-section-number">3</span> Next.js の 開発環境構築</a>
<ul>
<li><a href="#vscodeの起動" id="toc-vscodeの起動"><span
class="toc-section-number">3.1</span> VSCodeの起動</a></li>
<li><a href="#eslintrc.json" id="toc-eslintrc.json"><span
class="toc-section-number">3.2</span> .eslintrc.json</a></li>
<li><a href="#gitignore" id="toc-gitignore"><span
class="toc-section-number">3.3</span> .gitignore</a></li>
<li><a href="#next-env.d.ts" id="toc-next-env.d.ts"><span
class="toc-section-number">3.4</span> next-env.d.ts</a></li>
<li><a href="#next.config.mjs" id="toc-next.config.mjs"><span
class="toc-section-number">3.5</span> next.config.mjs</a></li>
<li><a href="#package.jsonpackage-lock.json"
id="toc-package.jsonpackage-lock.json"><span
class="toc-section-number">3.6</span>
package.json、package-lock.json</a></li>
<li><a href="#tailwind.config.tspostcss.config.mjs"
id="toc-tailwind.config.tspostcss.config.mjs"><span
class="toc-section-number">3.7</span>
tailwind.config.ts、postcss.config.mjs</a></li>
<li><a href="#tsconfig.json" id="toc-tsconfig.json"><span
class="toc-section-number">3.8</span> tsconfig.json</a></li>
<li><a href="#readme.md" id="toc-readme.md"><span
class="toc-section-number">3.9</span> README.md</a></li>
<li><a href="#srcapp-フォルダ" id="toc-srcapp-フォルダ"><span
class="toc-section-number">3.10</span> src/app フォルダ</a></li>
</ul></li>
<li><a href="#最小構成の-next.js-アプリ"
id="toc-最小構成の-next.js-アプリ"><span
class="toc-section-number">4</span> 最小構成の Next.js アプリ</a>
<ul>
<li><a href="#fonts-フォルダの削除" id="toc-fonts-フォルダの削除"><span
class="toc-section-number">4.1</span> fonts フォルダの削除</a></li>
<li><a href="#global.css-の編集" id="toc-global.css-の編集"><span
class="toc-section-number">4.2</span> global.css の編集</a></li>
<li><a href="#page.tsx-の編集" id="toc-page.tsx-の編集"><span
class="toc-section-number">4.3</span> page.tsx の編集</a></li>
<li><a href="#layout.tsx-の編集" id="toc-layout.tsx-の編集"><span
class="toc-section-number">4.4</span> layout.tsx の編集</a></li>
<li><a href="#動作確認" id="toc-動作確認"><span
class="toc-section-number">4.5</span> 動作確認</a></li>
<li><a href="#tailwind-css-関連のlint設定"
id="toc-tailwind-css-関連のlint設定"><span
class="toc-section-number">4.6</span> Tailwind CSS
関連のLint設定</a></li>
</ul></li>
<li><a href="#ヘッダのコンポーネント化"
id="toc-ヘッダのコンポーネント化"><span
class="toc-section-number">5</span> ヘッダのコンポーネント化</a>
<ul>
<li><a href="#fontawesome-の利用" id="toc-fontawesome-の利用"><span
class="toc-section-number">5.1</span> FontAwesome の利用</a></li>
<li><a href="#レイアウトの調整" id="toc-レイアウトの調整"><span
class="toc-section-number">5.2</span> レイアウトの調整</a></li>
</ul></li>
<li><a href="#ページの追加" id="toc-ページの追加"><span
class="toc-section-number">6</span> ページの追加</a>
<ul>
<li><a href="#アバター画像の準備と配置"
id="toc-アバター画像の準備と配置"><span
class="toc-section-number">6.1</span> アバター画像の準備と配置</a></li>
<li><a href="#aboutコンポーネントの作成"
id="toc-aboutコンポーネントの作成"><span
class="toc-section-number">6.2</span> Aboutコンポーネントの作成</a></li>
<li><a href="#ヘッダにaboutへのリンクを設定"
id="toc-ヘッダにaboutへのリンクを設定"><span
class="toc-section-number">6.3</span>
ヘッダにAboutへのリンクを設定</a></li>
<li><a href="#next.jsにおける画像の表示"
id="toc-next.jsにおける画像の表示"><span
class="toc-section-number">6.4</span> Next.jsにおける画像の表示</a></li>
</ul></li>
<li><a href="#投稿記事の一覧" id="toc-投稿記事の一覧"><span
class="toc-section-number">7</span> 投稿記事の一覧</a>
<ul>
<li><a href="#実装の方針" id="toc-実装の方針"><span
class="toc-section-number">7.1</span> 実装の方針</a></li>
<li><a href="#投稿記事のモックを生成"
id="toc-投稿記事のモックを生成"><span
class="toc-section-number">7.2</span> 投稿記事のモックを生成</a></li>
<li><a href="#記事一覧の表示" id="toc-記事一覧の表示"><span
class="toc-section-number">7.3</span> 記事一覧の表示</a></li>
<li><a href="#動作確認-1" id="toc-動作確認-1"><span
class="toc-section-number">7.4</span> 動作確認</a></li>
</ul></li>
</ul> 
        <!-- ---------------------------------------- -->
      </div>
    </nav>

    <header class="markdown-body">
      <p>2024-3I プログラミング3 第06回 講義資料</p>
      <p>2024年11月14日（木）1・2時限</p>
    </header>

    <main class="markdown-body">
      <!-- ---------------------------------------- -->
      <h1 data-number="1" id="連絡"><span
      class="header-section-number">1</span> 連絡</h1>
      <ul>
      <li><a
      href="lecture05.html#課題1">課題1</a>の提出期限は「<strong>11月27日
      (水) 23時</strong>」です。GoogleClassroom の
      <strong>「提出ボタン」の押下忘れ</strong>
      などが無いように注意してください
      (提出遅れや不備は減点となります)。
      <ul>
      <li>課題1は、ポートフォリオ (自己紹介と作品集)
      として作成したページからも
      <strong>リンクを貼っておくように</strong> してください。</li>
      <li>その他、ポートフォリには
      <strong>今年度の文化祭展示の概要</strong>
      (スクリーンショットや会場写真があると説得力が高くなります)
      や、他科目で開発したソフトウエアや修得したスキルなども、(記憶が鮮明なうちに)
      こまめに追記するようにしてください。<br />
      </li>
      <li>特に、文化祭展示などは <span
      class="masked">チームプロジェクトでの開発の経験があること</span>
      のアピールになってくるので必ず記載してください。</li>
      </ul></li>
      </ul>
      <h1 data-number="2"
      id="バックエンド処理を含めたブログアプリの開発"><span
      class="header-section-number">2</span>
      バックエンド処理を含めたブログアプリの開発</h1>
      <p>ここまでの授業では、フロントエンドのみで完結する
      <strong>Todoアプリの開発</strong>
      を通じて、「React」を使ったモダンウェブ開発の基礎について学んできました。ここからの授業では
      <strong><em>Next.js</em></strong> フレームワークとして使用し
      <strong>バックエンド (サーバサイド)
      を含めた「本格的なモダンウェブアプリ開発」</strong>
      について体験的に学んでいきます。</p>
      <p>現代のウェブアプリは「❶
      ウェブブラウザで実行されるフロントエンド部分」と「❷
      サーバ上で実行されるバックエンド部分」を
      <strong>RESTfulなウェブAPI (主にHTTP/HTTPSプロトコル上で実装)
      を介して「疎結合」な形で構成</strong>することが一般的となっています。そして、この設計によってフロントエンドとバックエンドで
      <span
      class="masked">異なる「プログラミング言語」や「フレームワーク」を使用すること</span>
      が可能になっています。</p>
      <p><strong>フロントエンドの開発言語</strong> は実質的に <span
      class="masked">HTML/CSS/JavaScript (TypeScript)</span>
      に限定されており、<strong>React</strong> や
      <strong>Vue.js</strong>、<strong>Svelte</strong> などの<a
      href="https://www.google.com/search?q=コンポーネント指向フレームワーク">コンポーネント指向フレームワーク</a>が主流となっています。かつて広く使用されていた
      <span class="masked">jQuery</span>
      は、これらのモダンフレームワークの登場と普及によって、<strong>新規開発案件での採用は減少傾向</strong>
      にあります。</p>
      <p>一方、<strong>バックエンド</strong>においては、次のような多様な「プログラミング言語」と「フレームワーク」の組み合わせの選択肢があり、実際に幅広く活用されています。</p>
      <ol type="1">
      <li> <strong>Ruby</strong> (Ruby on Rails)</li>
      <li> <strong>PHP</strong> (Laravel)</li>
      <li> <strong>Java</strong> (Spring Boot)</li>
      <li> <strong>Python</strong> (Django、FastAPI、Flask)</li>
      <li> <strong>C#</strong> (.NET ASP Core)</li>
      <li> <strong>Rust</strong> (Actix)</li>
      <li> <strong>Go</strong> (Gin、Echo)</li>
      <li> <strong>JavaScript/TypeScript</strong>
      (Express、Fastify)</li>
      </ol>
      <p>このような状況のなか「<strong>Next.js</strong>」は、TypeScript
      (JavaScript) を用いて
      <strong>フロントエンドとバックエンドを単一のプロジェクトとして統合的に開発できるという異色
      ( 革新的?! ) のフレームワーク</strong>
      として人気を集めています。Next.js のフロントエンドは <span
      class="masked">Reactをベースとしているため
      (ただしルーティングなどの一部機能を除く)</span>、Todoアプリ開発で学んだ
      React のスキルと経験をそのまま活かして学ぶことができます。</p>
      <p>今回の授業からは、この <strong>Next.js</strong>
      を使用して「<strong>ブログアプリ</strong>」の開発に取り組んでいきます（<span
      class="masked">チュートリアル的に「ブログアプリ」の開発を進めていきます</span>）。最終的には<a
      href="https://supabase.com/">Supabase</a>という Baas (Backend As A
      Service) を活用し、ブログ記事の <strong>CRUD操作</strong> (
      Create/Read/Update/Delete )、<strong>ログイン機能
      (ユーザ認証機能)</strong> までを実装していきます。</p>
      <p>ブログアプリの完成後は、<strong><em>最終課題</em></strong>
      として「<strong>オリジナルのウェブアプリを開発</strong>」に取り組んでもらいます。</p>
      <p>大まかな流れは、次のようになっています。</p>
      <ol type="1">
      <li>Next.js 開発環境の構築 <strong>← 今回の授業</strong></li>
      <li>ブログアプリの「<strong>フロントエンド開発</strong>」のチュートリアル
      <strong>← 今回の授業</strong>
      <ul>
      <li><a href="https://microcms.io/">microCMS</a> の利用</li>
      </ul></li>
      <li>ブログアプリの「<strong>バックエンド開発</strong>」のチュートリアル
      <ul>
      <li><a href="https://supabase.com/">supabase</a> と <a
      href="https://vercel.com/">varcel</a> の利用</li>
      </ul></li>
      <li>ブログアプリのカスタマイズとつくり込み →
      <strong><em>課題2</em></strong></li>
      <li>オリジナルのウェブアプリ → <strong><em>課題3</em></strong>
      (最終課題)</li>
      </ol>
      <h3 data-number="2.0.1" id="定着確認"><span
      class="header-section-number">2.0.1</span> 定着確認</h3>
      <ul>
      <li>Next.js
      がフレームワークとしてカバーする範囲は「フロントエンド」、「バックエンド」、「フロントエンドとバックエンドの両方」のどれか。
      <ul>
      <li>答え: <span
      class="masked">フロントエンドとバックエンドの両方</span></li>
      </ul></li>
      <li>Typescript (JavaScript) 以外で、バックエンド開発に使用される
      (代表的な)
      プログラミング言語とフレームワークの組み合わせを2組答えよ。</li>
      <li>DBと連携するウェブアプリ開発の文脈で「CRUD操作」の各文字は何の略語か答えよ。
      <ul>
      <li>答え: <span
      class="masked">Create/Read/Update/Delete</span></li>
      </ul></li>
      <li>RESTful APIにおいて採用される代表的な通信プロトコルを挙げよ。
      <ul>
      <li>答え: <span class="masked">HTTP/HTTPS。その他、CoAP や WSS
      などが採用されることがある。</span></li>
      </ul></li>
      <li>jQuery
      は、フロントエンド用のライブラリか、バックエンド用のライブラリか答えよ。
      <ul>
      <li>答え: <span
      class="masked">フロントエンド用のライブラリ</span></li>
      </ul></li>
      </ul>
      <h1 data-number="3" id="next.js-の-開発環境構築"><span
      class="header-section-number">3</span> Next.js の
      開発環境構築</h1>
      <p>Next.js は
      2024年10月21日に最新バージョンの「15」がリリースされています。しかしながら、2024年11月1日現在、<a
      href="">react-hook-form</a>
      などの主要な周辺ライブラリが、<strong>まだ Next.js 15
      に対応していない状況</strong>となっています。そのため、本授業では安定版の
      <strong>Next.js 14</strong> を使用していきます。</p>
      <p>以下、プロジェクト名称を「next-blog-app」として、<strong>Next.js
      14 の開発環境</strong>を構築していきます。</p>
      <p>ターミナル (PowerShell)
      を起動し、<strong>プロジェクトフォルダを作成したい位置</strong>
      (例えば <code>C:\Users\xxxx\Documents\</code> など)
      に移動してください。Next.js
      の開発環境は、次のコマンドを使って構築していきます。</p>
      <pre><code>npx create-next-app@14</code></pre>
      <p>ここで <span class="masked"><code>npm</code> ではなく
      <code>npx</code></span> とする点に注意してください
      (違いが気になる人は生成AIで解決してください)。また、最新バージョン
      である「15」で環境構築したい場合は
      <code>npx create-next-app@latest</code> としてください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Node.js における <code>npm</code> と <code>npx</code>
      の違いを初心者向けに分かりやすく解説してください。</p>
      </blockquote>
      <p> </p>
      <p>はじめて <code>npx create-next-app</code>
      を実行するときや、時間を空けて実行するときは、以下のように訊かれるので
      <code>y</code> で回答してください。</p>
      <pre><code>Need to install the following packages:
create-next-app@14.2.16
Ok to proceed? (y)</code></pre>
      <p><code>create-next-app</code>
      では、開発環境に関していくつかの質問がされます。ここでは、以下のように回答
      (設定)
      してください。ここで誤った設定をしてしまうと、あとからの修正が大変になるため、慎重に設定してください。</p>
      <blockquote>
      <p>√ What is your project named? … <strong>next-blog-app</strong>
      (プロジェクトの名称にあわせてせ設定)<br />
      √ Would you like to use TypeScript? … No /
      <strong>Yes</strong><br />
      √ Would you like to use ESLint? … No / <strong>Yes</strong><br />
      √ Would you like to use Tailwind CSS? … No /
      <strong>Yes</strong><br />
      √ Would you like to use <code>src/</code> directory? … No /
      <strong>Yes</strong><br />
      √ Would you like to use App Router? (recommended) … No /
      <strong>Yes</strong><br />
      √ Would you like to customize the default import alias (@/*)? … No
      / <strong>Yes</strong><br />
      √ What import alias would you like configured? … <strong> @/*
      </strong></p>
      </blockquote>
      <p>最後の「<strong>What import alias would you like
      configured?</strong>」では、そのまま <code>Enter</code>
      を押下すれば、上記のように <code>@/*</code>
      が設定されます。全ての質問に答えると各種パッケージのダウンロードとインストールを含めた環境構築が開始されます
      (しばらく時間がかかります)。</p>
      <p>最終的に以下のように
      <code>Success! Created next-blog-app</code>
      のようなログが表示されれば成功です。</p>
      <pre><code>Success! Created next-blog-app at C:\Users\xxxx\Documents\next-blog-app

A new version of `create-next-app` is available!
You can update by running: npm i -g create-next-app</code></pre>
      <p>なお、<strong>設定を間違えてしまったとき</strong>は、エクスプローラから当該フォルダを削除してから、再度
      <code>npx create-next-app@14</code> を実行してください。</p>
      <h3 data-number="3.0.1" id="定着確認-1"><span
      class="header-section-number">3.0.1</span> 定着確認</h3>
      <ul>
      <li>最新版の Next.js をフレームワークに使った開発環境 (の雛形)
      を構築するためのコマンドを答えよ。
      <ul>
      <li>答え: <span class="masked">npx
      create-next-app@latest</span></li>
      </ul></li>
      </ul>
      <h2 data-number="3.1" id="vscodeの起動"><span
      class="header-section-number">3.1</span> VSCodeの起動</h2>
      <p>作成されたプロジェクトフォルダ (next-blog-app) に移動して
      VSCode を起動してください。</p>
      <pre><code>cd next-blog-app
code .</code></pre>
      <p>プロジェクトは、以下のようなフォルダ構成になっているはずです。</p>
      <figure>
      <img src="figs/06/vscode_01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>プロジェクトフォルダを構成しているファイルについて確認していきます。</p>
      <h2 data-number="3.2" id="eslintrc.json"><span
      class="header-section-number">3.2</span> .eslintrc.json</h2>
      <p><code>.eslintrc.json</code> は、<strong>ESLint</strong> (<a
      href="lecture04.html#eslintのカスタマイズ">前回講義で解説済み</a>)
      のための設定ファイルです。<a
      href="lecture04.html#viteによるプロジェクトフォルダの作成">Vite
      で構築したReact環境</a>では<a
      href="lecture04.html#eslint.config.js">eslint.config.js</a>という「<strong>JSファイル</strong>」に設定を記述しましたが、ここでは「<strong>JSONファイル</strong>」に設定を記述します。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>ESLintの設定ファイルとして <code>.eslintrc.json</code> と
      <code>eslint.config.js</code>
      の2つの形式が存在するのは何故ですか？</p>
      </blockquote>
      <h2 data-number="3.3" id="gitignore"><span
      class="header-section-number">3.3</span> .gitignore</h2>
      <p>Gitによる
      <strong>バージョン管理をしないファイルやフォルダ</strong>
      (GitHubで公開しないファイルやフォルダ)
      を設定するファイルです。ライブラリをインストールする
      <code>/node_modules</code>
      フォルダなどが除外設定として記入されています。</p>
      <p>このプロジェクトでは、<code>.env</code>
      という<strong>環境変数の設定ファイル</strong> (= <span
      class="masked">あとで「microCMSのAPIキー」や「supabseのDB接続文字列」を記述する予定のファイル</span>)
      もバージョン管理から除外したいので、次のように追記してください。</p>
      <div class="sourceCode" id="cb5" data-caption=".gitignore (抜粋)"
      data-startFrom="28"><pre class="sourceCode txt"><code class="sourceCode default" style="counter-reset: source-line 27;"><span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a># local env files</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a>.env</span>
<span id="cb5-30"><a href="#cb5-30" aria-hidden="true" tabindex="-1"></a>.env*.local</span></code></pre></div>
      <h2 data-number="3.4" id="next-env.d.ts"><span
      class="header-section-number">3.4</span> next-env.d.ts</h2>
      <p>TypeScriptが <strong>Next.js</strong>
      の「組み込み機能」や「型」を認識するためのグローバル型宣言ファイルです。ファイルに書かれているように
      <span class="masked">This file should not be edited</span>
      です。</p>
      <h2 data-number="3.5" id="next.config.mjs"><span
      class="header-section-number">3.5</span> next.config.mjs</h2>
      <p><code>next.config.mjs</code> では <span
      class="masked">外部ドメインからの画像読み込みの制御</span>
      に関する設定などを記述します。必要に応じて設定を追加したり、書き換えたりする必要があります。</p>
      <h2 data-number="3.6" id="package.jsonpackage-lock.json"><span
      class="header-section-number">3.6</span>
      package.json、package-lock.json</h2>
      <p>これらのファイルについては、既に<a
      href="lecture01.html#開発を効率的に行なうためのパッケージの追加">解説済み</a>です。<code>package.json</code>
      の <code>"scripts"</code>
      に記載の各コマンドは次のように動作します。</p>
      <h3 data-number="3.6.1" id="npm-run-dev"><span
      class="header-section-number">3.6.1</span> npm run dev</h3>
      <p>「<strong>ホットリロード</strong>」や「<strong>エラー表示</strong>」の機能を提供する
      <strong>開発サーバ</strong>
      でアプリを起動します。デフォルトでは3000番ポートで起動します。実行時に
      <span
      class="masked">プロジェクトに「<code>.next</code>」というフォルダ</span>
      が生成され、開発用のビルドファイルが出力されます。このフォルダは
      <code>.gitignore</code>
      のなかでバージョン管理の<strong>対象外</strong>に設定されています。</p>
      <p>VSCodeのターミナル (<code>Ctrl</code>+<code>J</code>で起動)
      から実際に実行してみてください。起動したサーバは
      <code>Ctrl+C</code> で停止可能です。</p>
      <figure>
      <img src="figs/06/app_01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>トップページ (<code>http://localhost:3000/</code>)
      の画面は、Next.js
      のバージョンによっては違ったものになる可能性があります。画面上の説明も簡単に把握しておいてください。</p>
      <ol type="1">
      <li>Get started by editing src/app/page.tsx. (<strong>まずは
      src/app/page.tsx を編集することから始めましょう</strong>)</li>
      <li>Save and see your changes instantly.
      (<strong>編集して保存すると、変更が直ちに画面に反映されます</strong>)</li>
      </ol>
      <h3 data-number="3.6.2" id="npm-run-build"><span
      class="header-section-number">3.6.2</span> npm run build</h3>
      <p><strong>本番用 (プロダクション環境用)</strong>
      にアプリをビルドします。コードの「最適化」「バンドル」「ミニファイ化」などが行われたファイルが
      <code>.next</code> フォルダに出力されます
      (ビルドをするだけでサーバは起動しません)。デプロイをする前には、必ず実行する必要があります。</p>
      <p>実際に実行してみてください。また、ビルドについては生成AIを使って概要を把握してください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Node.js +
      TypeScript環境のウェブアプリ開発において、ビルドプロセスで実行される「最適化」「バンドル」「ミニファイ化」とは、どのような処理ですか。</p>
      </blockquote>
      <h3 data-number="3.6.3" id="npm-run-start"><span
      class="header-section-number">3.6.3</span> npm run start</h3>
      <p>ビルドされた本番用のアプリを起動します。開発サーバと同様にデフォルトでは3000番ポートで起動します。<code>npm start</code>
      でも実行可能です。</p>
      <p>実際に実行してみてください。</p>
      <h3 data-number="3.6.4" id="npm-run-lint"><span
      class="header-section-number">3.6.4</span> npm run lint</h3>
      <p>ESLint による静的コード解析 (コード品質チェック)
      を実行します。このコマンドの実行結果が
      <code>✔ No ESLint warnings or errors</code>
      であれば、特に問題が検出されなかったということになります。</p>
      <p>実際に実行してみてください。</p>
      <p>なお、VSCode に<a
      href="https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint">適切な拡張機能</a>をインストールしている場合は、リアルタイムにエディタ上に「警告」や「エラー」が表示されるので、基本的には、このコマンドを使用することはありません。</p>
      <figure>
      <img src="figs/06/vscode_02.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="3.7"
      id="tailwind.config.tspostcss.config.mjs"><span
      class="header-section-number">3.7</span>
      tailwind.config.ts、postcss.config.mjs</h2>
      <p><strong>Tailwind CSS
      に関する設定ファイル</strong>です。Tailwind CSS
      に関連するライブラリを追加したときは、設定の追記が必要となることがあります。</p>
      <h2 data-number="3.8" id="tsconfig.json"><span
      class="header-section-number">3.8</span> tsconfig.json</h2>
      <p><strong>TypeScript
      に関する設定ファイル</strong>です。必要に応じて編集することがあります。</p>
      <h2 data-number="3.9" id="readme.md"><span
      class="header-section-number">3.9</span> README.md</h2>
      <p>就職・インターンシップ向けのポートフォリオ用として開発・公開するときは、README.md
      の内容を適切に書き換えてください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>就職・インターンシップ向けのポートフォリオ用としてウェブアプリを開発しました。このリポジトリを公開するにあたって、README.md
      は、どのような構成にして、どのような内容を記載すると良いでしょうか。採用担当者の視点から解説してください。</p>
      </blockquote>
      <blockquote>
      <p>逆にマイナスの評価や印象となるような README.md
      とは、どのようなものでしょうか。具体例を示しながら解説してください。</p>
      </blockquote>
      <h2 data-number="3.10" id="srcapp-フォルダ"><span
      class="header-section-number">3.10</span> src/app フォルダ</h2>
      <p>Next.js では、基本的に <code>src/app</code>
      のなかにファイルやフォルダを配置することでコンテンツを構成していきます。この際、<span
      class="masked">ファイルの「名前」や「位置
      (階層構造)」が、ファイルに記述されるコードの役割や機能を直接的に決定づける点</span>
      に特徴があります。この設計思想は
      <strong>設定より規約</strong>（Convention over Configuration:
      CoC）と呼ばれるアプローチに基づくものになっています。</p>
      <p>Next.js における「設定より規約」の最も特徴的なものとして <span
      class="masked">URLルーティング</span> が挙げられます。</p>
      <p>ウェブアプリにおけるルーティングとは、<strong>URLを構成するパス</strong>
      (例えば <code>/posts/1</code> や <code>/about</code>) に応じて
      <span
      class="masked">「どのコンテンツを表示するか」を決める仕組み</span>
      を指します。</p>
      <h3 data-number="3.10.1" id="next.js-のルーティング"><span
      class="header-section-number">3.10.1</span> Next.js
      のルーティング</h3>
      <p>Next.js ( バージョン13から導入された AppRouter )
      では、<code>src/app</code>
      のなかに<strong>規約に従った名前でファイルを配置</strong>
      (基本的には <code>layout.tsx</code> もしくは
      <code>page.tsx</code>)、<strong>フォルダ階層を構成</strong>することで
      (自動的に)
      ルーティングが設定され、<strong>フォルダ構成がそのままURLのパス</strong>となります。</p>
      <p>例えば、次のようにプロジェクトフォルダを構成すると…</p>
      <pre><code>📂 src/app/
├─ page.tsx    # / のコンテンツを定義
├─ layout.tsx  # 全てのページで共有されるレイアウトを定義
└─ 📂 foo/
    └─ page.tsx  # /foo のコンテンツを定義</code></pre>
      <p>次のようなルーティングルールが自動的に適用されます。</p>
      <ul>
      <li>http://xxxx:3000<strong>/</strong>
      をリクエストしたときは、<code>src/app/layout.tsx</code>
      にラップされた <code>src/app/page.tsx</code>
      のコンテンツが表示されます。</li>
      <li>http://xxxx:3000<strong>/foo</strong>
      をリクエストしたときは、<code>src/app/layout.tsx</code>
      にラップされた <code>src/app/foo/page.tsx</code>
      のコンテンツが表示されます。</li>
      </ul>
      <p>また、<code>layout.tsx</code> は <strong>入れ子構造</strong>
      で適用され、親から子に順番にレイアウトが重ねられていきます。例えば、次のようにプロジェクトフォルダを構成して
      http://xxxx:3000<strong>/bar/baz</strong>
      をリクエストすると、、、</p>
      <pre><code>📂 src/app/
├─ page.tsx
├─ layout.tsx  # 全てのページで共有されるレイアウトを定義
└─ 📂 bar/
    ├─ page.tsx
    ├─ layout.tsx  # /bar 階層下のページで共有されるレイアウトを定義
    └─ 📂 baz/
        └─ page.tsx  # /bar/baz のコンテンツを定義</code></pre>
      <p>次のように複数の <code>layout.tsx</code>
      が順番に適用されます。</p>
      <ol type="1">
      <li><code>src/app/layout.tsx</code> のなかに、</li>
      <li><code>src/app/bar/layout.tsx</code> が配置され、</li>
      <li>そのなか <code>src/app/bar/baz/page.tsx</code>
      のコンテンツが表示されます。</li>
      </ol>
      <figure>
      <img src="figs/06/fig_01.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <div class="note type-caution">
      <p><strong>App Router と Pages Router</strong></p>
      <p>Next.js のバージョン「12」以前では「<strong>Pages
      Router</strong>」というルーティングシステムが採用されていました。現在の
      Next.js（最新バージョンは「15」）では、2022年10月のバージョン13.0で導入され、2023年5月の13.4で安定版となった「<strong>App
      Router</strong>」という
      <strong>新しいルーティングシステムの利用が推奨</strong>
      されています。</p>
      <p>ただし、ウェブ上の記事や生成AIの回答では、<strong>まだ Pages
      Router
      を前提とした情報が多く見られます</strong>。ウェブ検索や生成AIを利用する場合は、この点に留意してください。特に、生成AIでは
      <span class="masked">「Next.js (v14 + TypeScript + App Router)
      に関する質問です。」</span>
      のような文をプロンプトに含めるようにしてください。</p>
      </div>
      <h3 data-number="3.10.2" id="定着確認-2"><span
      class="header-section-number">3.10.2</span> 定着確認</h3>
      <ul>
      <li>アプリケーションの振る舞いを細かく設定ファイルで指定するのではなく、フレームワークが想定する命名規則や配置ルールに従うことで、設定コードを書く手間を省くプログラミングパラダイムのことを何というか。「XXX
      よりYYY」もしくは「XXX over YYY」の形式で答えよ。
      <ul>
      <li>答え: <span class="masked">設定より規約。Convention over
      Configuration。</span></li>
      </ul></li>
      <li>Next.js 14
      で使用可能な2つのルーティングシステムを答えよ。また、現在、使用が推奨されているルーティングシステムはどちらか。
      <ul>
      <li>答え: <span class="masked">「Pages Router」と「App
      Router」。現在推奨されているのは「App Router」</span></li>
      </ul></li>
      <li>Next.js で TypeScript および App Router
      を採用したプロジェクトにおいて、<code>/about</code>
      というURLパスにアクセスしたときに表示される画面 (UI)
      を作成したい。このために <code>src/app/about</code>
      フォルダに作成すべきファイル名を拡張子を含めて答えよ。
      <ul>
      <li>答え: <span class="masked"><code>page.tsx</code></span></li>
      </ul></li>
      </ul>
      <h1 data-number="4" id="最小構成の-next.js-アプリ"><span
      class="header-section-number">4</span> 最小構成の Next.js
      アプリ</h1>
      <p>まずは、最低限必要なファイルだけで、<strong>最もシンプルにアプリを構成</strong>していきます。プロジェクトフォルダの
      <code>src/app</code> に対して、以下の作業を行なってください。</p>
      <h2 data-number="4.1" id="fonts-フォルダの削除"><span
      class="header-section-number">4.1</span> fonts フォルダの削除</h2>
      <p>fontsフォルダを削除してください。</p>
      <h2 data-number="4.2" id="global.css-の編集"><span
      class="header-section-number">4.2</span> global.css の編集</h2>
      <p>global.css を次のように編集してください
      (先頭の3行を残して以降の内容を全て削除)。ファイルの編集後は忘れずに保存操作をしてください、以下同様。</p>
      <div class="sourceCode" id="cb8" data-caption="global.css"><pre
      class="sourceCode numberSource css numberLines"><code class="sourceCode css"><span id="cb8-1"><a href="#cb8-1"></a><span class="im">@tailwind</span> base<span class="op">;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="im">@tailwind</span> components<span class="op">;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="im">@tailwind</span> utilities<span class="op">;</span></span></code></pre></div>
      <p>なお、VSCode上で <code>@tailwind</code>
      に「警告」もしくは「エラー」の波線が表示されるかもしれませんが、問題ありません
      (<a href="lecture06.html#tailwind-css-関連のlint設定">Tailwind CSS
      関連のLint設定</a>の項目で解決します)。</p>
      <h2 data-number="4.3" id="page.tsx-の編集"><span
      class="header-section-number">4.3</span> page.tsx の編集</h2>
      <p>先頭の <code>"use client";</code>
      は重要な意味を持ちます。この講義では、インタラクティブなウェブアプリを作成するため、<strong>原則として全てのTSXファイル</strong>（
      <code>src/app/layout.tsx</code>
      を除く）<strong>の先頭には、この宣言を入れてください</strong>。これにより、その関数コンポーネントで
      <strong>Reactの状態管理</strong>（ <span class="masked">useState
      や useEffect などの
      ReactHooks</span>）が使用できるようになります。</p>
      <p><code>page.tsx</code> を次のように書き換えてください。</p>
      <div class="sourceCode" id="cb9" data-caption="page.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb9-2"><a href="#cb9-2"></a></span>
<span id="cb9-3"><a href="#cb9-3"></a><span class="kw">const</span> Page<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="cf">return</span> (</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="op">&lt;</span>main<span class="op">&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;font-bold text-2xl&quot;</span><span class="op">&gt;</span>Main<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="op">&lt;/</span>main<span class="op">&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>  )<span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>}<span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10"></a></span>
<span id="cb9-11"><a href="#cb9-11"></a><span class="im">export</span> <span class="im">default</span> Page<span class="op">;</span></span></code></pre></div>
      <p>ここで <strong>第03行目</strong> の <code>Page</code>
      は、アロー関数形式で記述した
      <strong>Reactの関数コンポーネント</strong> です。JSX (JavaScript
      XML) が戻り値になっていることを確認してください。なお、型
      <code>React.FC</code> の FCは <span class="masked">Function
      Component (関数コンポーネント)</span> の略になります。</p>
      <p>関数コンポーネントの名前は自由に設定できますが、<strong>先頭を大文字にしてパスカルケースで命名</strong>する必要があります
      (例えば <code>page</code>
      のように先頭を小文字にすると予期せぬトラブルの原因となります)。また、<code>page.tsx</code>
      に記述する関数コンポーネントには、<strong>第11行目</strong>のように必ず
      <code>export default</code>
      キーワードを付けてデフォルトエクスポートに設定してください。</p>
      <p>なお、型推論が働くので、<strong>第03行目</strong>の
      <code>React.FC</code> は省略も可能であり、さらに
      <strong>function形式</strong> にすれば <code>export default</code>
      を定義部に直接的に記述可能なので、次のように書くこともできます。ただし、<span
      class="masked">どちらの形式で書かれていても読解できるようになっておいてください</span>。</p>
      <div class="sourceCode" id="cb10"
      data-caption="page.tsx (型省略、デフォルトエクスポートのキーワードを移動)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="fu">Page</span>() {</span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="cf">return</span> (</span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="op">&lt;</span>main<span class="op">&gt;</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;font-bold text-2xl&quot;</span><span class="op">&gt;</span>Main<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>    <span class="op">&lt;/</span>main<span class="op">&gt;</span></span>
<span id="cb10-8"><a href="#cb10-8"></a>  )<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>}</span></code></pre></div>
      <p>次項で説明しますが、同じ階層 (フォルダ内) に
      <code>layout.tsx</code> と <code>page.tsx</code>
      が存在するときは、<code>layout.tsx</code> のなかの
      <code>{children}</code> に <code>page.tsx</code>
      が埋め込まれてレンダリングされます。</p>
      <h3 data-number="4.3.1" id="定着確認-3"><span
      class="header-section-number">4.3.1</span> 定着確認</h3>
      <p>「リスト1」は、Next.js
      のプロジェクトに配置したファイルである。以下の問いに答えよ。</p>
      <ul>
      <li>「リスト1」に示すプログラムにおいて、関数 <code>Page</code>
      のなかで useState や useEffect などの ReactHooks
      を使用したい。このとき、<strong>第01行目</strong>
      に記述すべき文を答えよ。
      <ul>
      <li>答え: <span
      class="masked"><code>"use client";</code></span></li>
      </ul></li>
      <li>「リスト1」に示すプログラムにおいて、関数 <code>Page</code>
      をデフォルトエクスポートしたい。このとき、<strong>第09行目</strong>
      に記述すべき文を答えよ。
      <ul>
      <li>答え: <span
      class="masked"><code>export default Page;</code></span></li>
      </ul></li>
      </ul>
      <div class="sourceCode" id="cb11" data-caption="リスト1"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb11-1"><a href="#cb11-1"></a></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="kw">const</span> Page<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="cf">return</span> (</span>
<span id="cb11-4"><a href="#cb11-4"></a>    <span class="op">&lt;</span>main<span class="op">&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;font-bold text-2xl&quot;</span><span class="op">&gt;</span>Main<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="op">&lt;/</span>main<span class="op">&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7"></a>  )<span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>}<span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9"></a> </span></code></pre></div>
      <h2 data-number="4.4" id="layout.tsx-の編集"><span
      class="header-section-number">4.4</span> layout.tsx の編集</h2>
      <p><strong>Next.js</strong> において
      <code>src/app/layout.tsx</code> は <span
      class="masked">アプリのレイアウトに関するエントリーポイント
      (最初に読み込まれDOMツリーを構築する基点となるファイル)</span>
      という位置づけになります。そして、このファイルには、アプリ全体のHTML構造を定義した関数コンポーネントを記述します。</p>
      <p>この <code>page.tsx</code> に記述する関数コンポーネントと同じく
      <strong>任意の名前を設定可能</strong>
      ですが、次の条件を満たす必要があります。</p>
      <ol type="1">
      <li><code>export default</code>
      を付与して<strong>デフォルトエクスポート</strong>に設定すること
      (<strong>第27行目</strong>)。</li>
      <li>Prosp として <code>children</code> プロパティが受け取れること
      (<strong>第13行目</strong>)。</li>
      <li><code>"use client";</code> を<strong>記述しない</strong>こと
      <ul>
      <li>ただし <code>src/app</code> 直下以外に配置する
      <code>layout.tsx</code> には <code>"use client";</code>
      を記述してください。</li>
      </ul></li>
      </ol>
      <p><code>layout.tsx</code> を次のように書き換えてください。</p>
      <div class="sourceCode" id="cb12" data-caption="layout.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb12-1"><a href="#cb12-1"></a><span class="im">import</span> <span class="im">type</span> { Metadata } <span class="im">from</span> <span class="st">&quot;next&quot;</span><span class="op">;</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="im">import</span> <span class="st">&quot;./globals.css&quot;</span><span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3"></a></span>
<span id="cb12-4"><a href="#cb12-4"></a><span class="im">export</span> <span class="kw">const</span> metadata<span class="op">:</span> Metadata <span class="op">=</span> {</span>
<span id="cb12-5"><a href="#cb12-5"></a>  title<span class="op">:</span> <span class="st">&quot;NextBlogApp&quot;</span><span class="op">,</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>  description<span class="op">:</span> <span class="st">&quot;Built to learn Next.js and modern web development.&quot;</span><span class="op">,</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>}<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8"></a></span>
<span id="cb12-9"><a href="#cb12-9"></a><span class="kw">type</span> Props <span class="op">=</span> {</span>
<span id="cb12-10"><a href="#cb12-10"></a>  children<span class="op">:</span> React<span class="op">.</span><span class="at">ReactNode</span><span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>}<span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12"></a></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="kw">const</span> RootLayout<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>Props<span class="op">&gt;</span> <span class="op">=</span> (props) <span class="kw">=&gt;</span> {</span>
<span id="cb12-14"><a href="#cb12-14"></a>  <span class="kw">const</span> { children } <span class="op">=</span> props<span class="op">;</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>  <span class="cf">return</span> (</span>
<span id="cb12-16"><a href="#cb12-16"></a>    <span class="op">&lt;</span>html lang<span class="op">=</span><span class="st">&quot;ja&quot;</span><span class="op">&gt;</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>      <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>        <span class="op">&lt;</span>header<span class="op">&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19"></a>          <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;bg-slate-800 text-white font-bold py-2&quot;</span><span class="op">&gt;</span>Header<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb12-20"><a href="#cb12-20"></a>        <span class="op">&lt;/</span>header<span class="op">&gt;</span></span>
<span id="cb12-21"><a href="#cb12-21"></a>        <span class="op">&lt;</span>div<span class="op">&gt;</span>{children}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>      <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23"></a>    <span class="op">&lt;/</span>html<span class="op">&gt;</span></span>
<span id="cb12-24"><a href="#cb12-24"></a>  )<span class="op">;</span></span>
<span id="cb12-25"><a href="#cb12-25"></a>}<span class="op">;</span></span>
<span id="cb12-26"><a href="#cb12-26"></a></span>
<span id="cb12-27"><a href="#cb12-27"></a><span class="im">export</span> <span class="im">default</span> RootLayout<span class="op">;</span></span></code></pre></div>
      <p>Prosp として受け取る <code>children</code> には <span
      class="masked">URLのパスに応じて取得されるReact関数コンポーネント</span>
      が代入されます。例えば、<code>http://xxxx/foo</code>
      をリクエストしたときには、プロジェクトフォルダの
      <code>src/app/foo/page.tsx</code>
      のなかでデフォルトエクスポートされる関数コンポーネントが
      <code>children</code> に読み込まれます。</p>
      <p><strong>第04行目</strong> から <strong>第07行目</strong>
      で設定した内容は、最終的にレンダリングされるHTMLの
      <code>&lt;head&gt;...&lt;/head&gt;</code> に反映されます。</p>
      <figure>
      <img src="figs/06/app_03.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="4.5" id="動作確認"><span
      class="header-section-number">4.5</span> 動作確認</h2>
      <p><code>src/app</code>
      は、次のようなファイル構成となるはずです。</p>
      <figure>
      <img src="figs/06/vscode_03.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><code>npm run dev</code> で開発モードでアプリを起動して
      <code>http://localhost:3000/</code>
      にアクセスしてください。次のような画面が表示されるはずです。</p>
      <figure>
      <img src="figs/06/app_02.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="4.6" id="tailwind-css-関連のlint設定"><span
      class="header-section-number">4.6</span> Tailwind CSS
      関連のLint設定</h2>
      <p>Tailwind
      のユーティリティクラスの自動並べ替えを行なうための設定を行ないます。基本的には<a
      href="lecture04.html#tailwind-css-関連のlint">React開発環境で設定した内容</a>と同じです。</p>
      <p>VSCodeの拡張機能としての Prettier
      (識別子:<code>esbenp.prettier-vscode</code>) とESLint
      (識別子:<code>dbaeumer.vscode-eslint</code>)
      はあらかじめインストールされているものとします。</p>
      <p>VSCode
      でターミナルを起動し、次のように「prettier」と「eslint-plugin-tailwindcss」を開発用のパッケージとしてインストールします。</p>
      <pre><code>npm i -D prettier eslint-plugin-tailwindcss</code></pre>
      <p>つづいて <code>.eslintrc.json</code>
      を次のように変更してください。</p>
      <div class="sourceCode" id="cb14"
      data-caption=".eslintrc.json"><pre
      class="sourceCode numberSource json numberLines"><code class="sourceCode json"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">{</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>  <span class="dt">&quot;extends&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;next/core-web-vitals&quot;</span><span class="ot">,</span> <span class="st">&quot;plugin:tailwindcss/recommended&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb14-3"><a href="#cb14-3"></a>  <span class="dt">&quot;settings&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-4"><a href="#cb14-4"></a>    <span class="dt">&quot;tailwindcss&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>      <span class="dt">&quot;callees&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;cn&quot;</span><span class="ot">,</span> <span class="st">&quot;twMerge&quot;</span><span class="ot">,</span> <span class="st">&quot;tv&quot;</span><span class="ot">]</span></span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="fu">}</span></span>
<span id="cb14-7"><a href="#cb14-7"></a>  <span class="fu">}</span></span>
<span id="cb14-8"><a href="#cb14-8"></a><span class="fu">}</span></span></code></pre></div>
      <p>さらに、<strong>プロジェクトフォルダの「直下」</strong>に
      <code>.vscode</code> フォルダを作成して、そのなかに
      <code>settings.json</code>
      を作成して次の内容を記述してください。</p>
      <div class="sourceCode" id="cb15"
      data-caption=".vscode/settings.json"><pre
      class="sourceCode numberSource json numberLines"><code class="sourceCode json"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">{</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="dt">&quot;editor.formatOnSave&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>  <span class="dt">&quot;editor.formatOnPaste&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb15-4"><a href="#cb15-4"></a>  <span class="dt">&quot;editor.formatOnType&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb15-5"><a href="#cb15-5"></a>  <span class="dt">&quot;editor.defaultFormatter&quot;</span><span class="fu">:</span> <span class="st">&quot;esbenp.prettier-vscode&quot;</span><span class="fu">,</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>  <span class="dt">&quot;editor.codeActionsOnSave&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;source.fixAll.eslint&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb15-7"><a href="#cb15-7"></a>  <span class="dt">&quot;css.lint.unknownAtRules&quot;</span><span class="fu">:</span> <span class="st">&quot;ignore&quot;</span></span>
<span id="cb15-8"><a href="#cb15-8"></a><span class="fu">}</span></span></code></pre></div>
      <p>設定ファイル名は <code>setting.json</code> ではなく
      <code>settings.json</code> なので注意してください。</p>
      <p>なお、最後の <code>"css.lint.unknownAtRules": "ignore"</code>
      の設定によって <code>src/app/globals.css</code>
      で表示されていたエラーが抑制されます。</p>
      <p><code>src/app/layout.tsx</code> および
      <code>src/app/page.tsx</code> を開くと、JSXのclassName属性に警告
      (<span class="masked">Invalid Tailwind CSS classnames
      order</span>)
      の黄色波線が表示され、その状態で保存操作をすると並び替えが実行されます。</p>
      <h1 data-number="5" id="ヘッダのコンポーネント化"><span
      class="header-section-number">5</span>
      ヘッダのコンポーネント化</h1>
      <p>Next.jsでは、Next.jsでは <strong>再利用性</strong> や
      <strong>保守性</strong>
      を高めるために、コードの「<strong>コンポーネント化</strong>」が推奨されています。コンポーネント化とは
      <span
      class="masked">UIやロジックの共通部分を再利用可能な小さなパーツとして切り出すこと</span>
      を意味します。</p>
      <p>ここでは例として、<code>src/app/layout.ts</code> の
      <strong>第18行目</strong> から <strong>第20行目</strong>
      に記述している「<strong>ヘッダ部</strong>」を <span
      class="masked">「Header」というコンポーネントに切り出して別ファイルで管理</span>する手順を説明します。</p>
      <div class="sourceCode" id="cb16"
      data-caption="src/app/layout.tsx (抜粋)" data-startFrom="13"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript" style="counter-reset: source-line 12;"><span id="cb16-13"><a href="#cb16-13"></a><span class="kw">const</span> RootLayout<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>Props<span class="op">&gt;</span> <span class="op">=</span> (props) <span class="kw">=&gt;</span> {</span>
<span id="cb16-14"><a href="#cb16-14"></a>  <span class="kw">const</span> { children } <span class="op">=</span> props<span class="op">;</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="cf">return</span> (</span>
<span id="cb16-16"><a href="#cb16-16"></a>    <span class="op">&lt;</span>html lang<span class="op">=</span><span class="st">&quot;ja&quot;</span><span class="op">&gt;</span></span>
<span id="cb16-17"><a href="#cb16-17"></a>      <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb16-18"><a href="#cb16-18"></a>        <span class="op">&lt;</span>header<span class="op">&gt;</span> {<span class="co">/* ここから */</span>}</span>
<span id="cb16-19"><a href="#cb16-19"></a>          <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;bg-slate-800 text-white font-bold py-2&quot;</span><span class="op">&gt;</span>Header<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb16-20"><a href="#cb16-20"></a>        <span class="op">&lt;/</span>header<span class="op">&gt;</span> {<span class="co">/* ここまでをHeaderコンポーネント化する */</span>}</span>
<span id="cb16-21"><a href="#cb16-21"></a>        <span class="op">&lt;</span>div<span class="op">&gt;</span>{children}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb16-22"><a href="#cb16-22"></a>      <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb16-23"><a href="#cb16-23"></a>    <span class="op">&lt;/</span>html<span class="op">&gt;</span></span>
<span id="cb16-24"><a href="#cb16-24"></a>  )<span class="op">;</span></span>
<span id="cb16-25"><a href="#cb16-25"></a>}<span class="op">;</span></span></code></pre></div>
      <p>まずは <code>src/app</code> に <code>_components</code>
      というフォルダを作成して、そこに <code>Header.tsx</code>
      を新規作成してください。</p>
      <p>ここでは、フォルダ名の先頭に必ず <strong>アンダーバー</strong>
      <code>_</code>
      をつけるようにしてください。もし、<code>components</code>
      とすると、それは <code>http://localhost:3000/components</code>
      のようなルーティングの対象として機能してしまいます。一方で、<strong>先頭にアンダーバーをつけるとルーティングの対象外</strong>となり、純粋にコンポーネント用のフォルダとして扱われるようになります。</p>
      <figure>
      <img src="figs/06/vscode_04.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>つづいて <code>Header.tsx</code> に以下のように
      <code>Header</code>
      という関数コンポーネントを記述して保存してください。なお、慣例的に
      <span
      class="masked">Reactの関数コンポーネントを記述するファイル名は、先頭を大文字にしたパスカルケース</span>
      (例えば <code>Header.tsx</code> や <code>Button.tsx</code> など)
      で名前を付けます。ただし、Next.js の特別なファイルである
      <code>page.tsx</code> と <code>layout.tsx</code>
      は例外的に先頭を小文字にします。</p>
      <div class="sourceCode" id="cb17"
      data-caption="src/app/_components/Header.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb17-1"><a href="#cb17-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a><span class="kw">const</span> Header<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="cf">return</span> (</span>
<span id="cb17-5"><a href="#cb17-5"></a>    <span class="op">&lt;</span>header<span class="op">&gt;</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;bg-slate-800 py-2 font-bold text-white&quot;</span><span class="op">&gt;</span>Header<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>    <span class="op">&lt;/</span>header<span class="op">&gt;</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>  )<span class="op">;</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>}<span class="op">;</span></span>
<span id="cb17-10"><a href="#cb17-10"></a></span>
<span id="cb17-11"><a href="#cb17-11"></a><span class="im">export</span> <span class="im">default</span> Header<span class="op">;</span></span></code></pre></div>
      <p>次に <code>src/app/layout.tsx</code>
      を次のように書き換えてください。<strong>第03行目</strong> と
      <strong>第19行目</strong> が書き換えられた部分になります。</p>
      <div class="sourceCode" id="cb18"
      data-caption="src/app/layout.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb18-1"><a href="#cb18-1"></a><span class="im">import</span> <span class="im">type</span> { Metadata } <span class="im">from</span> <span class="st">&quot;next&quot;</span><span class="op">;</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="im">import</span> <span class="st">&quot;./globals.css&quot;</span><span class="op">;</span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="im">import</span> Header <span class="im">from</span> <span class="st">&quot;@/app/_components/Header&quot;</span><span class="op">;</span></span>
<span id="cb18-4"><a href="#cb18-4"></a></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="im">export</span> <span class="kw">const</span> metadata<span class="op">:</span> Metadata <span class="op">=</span> {</span>
<span id="cb18-6"><a href="#cb18-6"></a>  title<span class="op">:</span> <span class="st">&quot;NextBlogApp&quot;</span><span class="op">,</span></span>
<span id="cb18-7"><a href="#cb18-7"></a>  description<span class="op">:</span> <span class="st">&quot;Built to learn Next.js and modern web development.&quot;</span><span class="op">,</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>}<span class="op">;</span></span>
<span id="cb18-9"><a href="#cb18-9"></a></span>
<span id="cb18-10"><a href="#cb18-10"></a><span class="kw">type</span> Props <span class="op">=</span> {</span>
<span id="cb18-11"><a href="#cb18-11"></a>  children<span class="op">:</span> React<span class="op">.</span><span class="at">ReactNode</span><span class="op">;</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>}<span class="op">;</span></span>
<span id="cb18-13"><a href="#cb18-13"></a></span>
<span id="cb18-14"><a href="#cb18-14"></a><span class="kw">const</span> RootLayout<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>Props<span class="op">&gt;</span> <span class="op">=</span> (props) <span class="kw">=&gt;</span> {</span>
<span id="cb18-15"><a href="#cb18-15"></a>  <span class="kw">const</span> { children } <span class="op">=</span> props<span class="op">;</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>  <span class="cf">return</span> (</span>
<span id="cb18-17"><a href="#cb18-17"></a>    <span class="op">&lt;</span>html lang<span class="op">=</span><span class="st">&quot;ja&quot;</span><span class="op">&gt;</span></span>
<span id="cb18-18"><a href="#cb18-18"></a>      <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb18-19"><a href="#cb18-19"></a>        <span class="op">&lt;</span>Header <span class="op">/&gt;</span></span>
<span id="cb18-20"><a href="#cb18-20"></a>        <span class="op">&lt;</span>div<span class="op">&gt;</span>{children}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb18-21"><a href="#cb18-21"></a>      <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb18-22"><a href="#cb18-22"></a>    <span class="op">&lt;/</span>html<span class="op">&gt;</span></span>
<span id="cb18-23"><a href="#cb18-23"></a>  )<span class="op">;</span></span>
<span id="cb18-24"><a href="#cb18-24"></a>}<span class="op">;</span></span>
<span id="cb18-25"><a href="#cb18-25"></a></span>
<span id="cb18-26"><a href="#cb18-26"></a><span class="im">export</span> <span class="im">default</span> RootLayout<span class="op">;</span></span></code></pre></div>
      <p><strong>第03行目</strong> では
      <code>src/app/_components/Header.tsx</code> で定義している Header
      コンポーネントをインポートしています。パスの先頭を <code>@</code>
      にすると <code>src</code> をルートとした <span
      class="masked">絶対パス</span>
      でファイル位置の指定が可能になります。これは、Next.js
      の環境構築で以下のように設定しているためです。</p>
      <blockquote>
      <p>√ Would you like to customize the default import alias (@/*)? …
      No / <strong>Yes</strong><br />
      √ What import alias would you like configured? … <strong> @/*
      </strong></p>
      </blockquote>
      <p>なお、<code>import Header from "./_components/Header"</code>
      のように<strong>相対パス</strong>でも指定が可能です。プロジェクトフォルダが複雑になってくるほど、絶対パスで指定できることのメリットが大きくなります。</p>
      <p>以上のようにインポートしたHeaderコンポーネントを、<strong>第19行目</strong>
      において <code>&lt;Header /&gt;</code>
      のような自己完結タグで配置しています。これは
      <code>&lt;Header&gt;&lt;/Header&gt;</code>
      のように記述することもできます。</p>
      <p>開発モードでブログアプリを実行して
      (<code>npm run dev</code>を実行して)、ヘッダ部をコンポーネント化する前と同様にアプリが表示されること確認してください。</p>
      <figure>
      <img src="figs/06/app_02.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="5.1" id="fontawesome-の利用"><span
      class="header-section-number">5.1</span> FontAwesome の利用</h2>
      <p>Next.js で<a
      href="https://fontawesome.com/icons/categories">FontAwesome</a>の各種アイコンを使用する場合は少し注意が必要になってきます。</p>
      <p>まずは、同様にパッケージをインストールしてください。</p>
      <pre><code>npm i @fortawesome/react-fontawesome @fortawesome/fontawesome-svg-core
npm i @fortawesome/free-solid-svg-icons</code></pre>
      <p>また、<code>src/app/layout.tsx</code> を以下のように編集します
      (<strong>第04行目</strong>から<strong>第06行目</strong>の内容を記述してください。この部分が
      Next.js 固有の注意点になります。</p>
      <div class="sourceCode" id="cb20"
      data-caption="src/app/layout.tsx (抜粋)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb20-1"><a href="#cb20-1"></a><span class="im">import</span> <span class="im">type</span> { Metadata } <span class="im">from</span> <span class="st">&quot;next&quot;</span><span class="op">;</span></span>
<span id="cb20-2"><a href="#cb20-2"></a><span class="im">import</span> <span class="st">&quot;./globals.css&quot;</span><span class="op">;</span></span>
<span id="cb20-3"><a href="#cb20-3"></a></span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="im">import</span> <span class="st">&quot;@fortawesome/fontawesome-svg-core/styles.css&quot;</span><span class="op">;</span></span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="im">import</span> { config } <span class="im">from</span> <span class="st">&quot;@fortawesome/fontawesome-svg-core&quot;</span><span class="op">;</span></span>
<span id="cb20-6"><a href="#cb20-6"></a>config<span class="op">.</span><span class="at">autoAddCss</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb20-7"><a href="#cb20-7"></a></span>
<span id="cb20-8"><a href="#cb20-8"></a><span class="im">import</span> Header <span class="im">from</span> <span class="st">&quot;@/app/_components/Header&quot;</span><span class="op">;</span></span>
<span id="cb20-9"><a href="#cb20-9"></a></span>
<span id="cb20-10"><a href="#cb20-10"></a><span class="im">export</span> <span class="kw">const</span> metadata<span class="op">:</span> Metadata <span class="op">=</span> { <span class="op">...</span></span>
<span id="cb20-11"><a href="#cb20-11"></a><span class="co">// 以下、略</span></span></code></pre></div>
      <p>つづいて、実際にアイコンを使いたいコンポーネントでの処理になります。ここでは、Headerコンポーネントに<a
      href="https://fontawesome.com/icons/fish?f=classic&amp;s=solid">サカナのアイコン</a>(<i class="fa-solid fa-fish"></i>)
      を追加していきたいと思います。</p>
      <p><code>src/app/_components/Header.tsx</code>
      を次のように書き換えてください。<strong>第03行目</strong> と
      <strong>第09行目</strong> が編集部分になります。</p>
      <div class="sourceCode" id="cb21"
      data-caption="src/app/_components/Header.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb21-1"><a href="#cb21-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2"></a><span class="im">import</span> { FontAwesomeIcon } <span class="im">from</span> <span class="st">&quot;@fortawesome/react-fontawesome&quot;</span><span class="op">;</span></span>
<span id="cb21-3"><a href="#cb21-3"></a><span class="im">import</span> { faFish } <span class="im">from</span> <span class="st">&quot;@fortawesome/free-solid-svg-icons&quot;</span><span class="op">;</span></span>
<span id="cb21-4"><a href="#cb21-4"></a></span>
<span id="cb21-5"><a href="#cb21-5"></a><span class="kw">const</span> Header<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb21-6"><a href="#cb21-6"></a>  <span class="cf">return</span> (</span>
<span id="cb21-7"><a href="#cb21-7"></a>    <span class="op">&lt;</span>header<span class="op">&gt;</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;bg-slate-800 py-2 font-bold text-white&quot;</span><span class="op">&gt;</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>        <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faFish} className<span class="op">=</span><span class="st">&quot;mr-1&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>        Header</span>
<span id="cb21-11"><a href="#cb21-11"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb21-12"><a href="#cb21-12"></a>    <span class="op">&lt;/</span>header<span class="op">&gt;</span></span>
<span id="cb21-13"><a href="#cb21-13"></a>  )<span class="op">;</span></span>
<span id="cb21-14"><a href="#cb21-14"></a>}<span class="op">;</span></span>
<span id="cb21-15"><a href="#cb21-15"></a></span>
<span id="cb21-16"><a href="#cb21-16"></a><span class="im">export</span> <span class="im">default</span> Header<span class="op">;</span></span></code></pre></div>
      <p>各ファイルが保存されていることを確認して、アプリを実行して表示を確認してください。次のようにヘッダに<strong><i class="fa-solid fa-fish"></i>なアイコン</strong>がついているはずです。</p>
      <figure>
      <img src="figs/06/app_04.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>なお、<code>layout.tsx</code>
      に追加した3行をコメントアウトすると (リロードしたときに)
      表示が乱れることも確認してください。</p>
      <h2 data-number="5.2" id="レイアウトの調整"><span
      class="header-section-number">5.2</span> レイアウトの調整</h2>
      <p>現状では、左端に余白がなくレスポンシブデザインにもなっていないので、ここでレイアウトについての大まかな調整していきます。次の図のようなレイアウトになるように設定していきます。</p>
      <figure>
      <img src="figs/06/app_05.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>まずは、ReactによるTodoアプリ開発でも使用した「tailwind-merge」をインストールしてください。</p>
      <pre><code>npm i -D tailwind-merge</code></pre>
      <p>次に <code>src/app/_components/Header.tsx</code>
      を次のように編集してください。<strong>第19行目</strong>
      の「Header」の文字列は「<strong>XXX’s Tech
      Notes</strong>」や「<strong>XXXのブログ</strong>」のように適当に書き換えてください。</p>
      <div class="sourceCode" id="cb23"
      data-caption="src/app/_components/Header.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb23-1"><a href="#cb23-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2"></a><span class="im">import</span> { twMerge } <span class="im">from</span> <span class="st">&quot;tailwind-merge&quot;</span><span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3"></a><span class="im">import</span> { FontAwesomeIcon } <span class="im">from</span> <span class="st">&quot;@fortawesome/react-fontawesome&quot;</span><span class="op">;</span></span>
<span id="cb23-4"><a href="#cb23-4"></a><span class="im">import</span> { faFish } <span class="im">from</span> <span class="st">&quot;@fortawesome/free-solid-svg-icons&quot;</span><span class="op">;</span></span>
<span id="cb23-5"><a href="#cb23-5"></a></span>
<span id="cb23-6"><a href="#cb23-6"></a><span class="kw">const</span> Header<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="cf">return</span> (</span>
<span id="cb23-8"><a href="#cb23-8"></a>    <span class="op">&lt;</span>header<span class="op">&gt;</span></span>
<span id="cb23-9"><a href="#cb23-9"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;bg-slate-800 py-2&quot;</span><span class="op">&gt;</span></span>
<span id="cb23-10"><a href="#cb23-10"></a>        <span class="op">&lt;</span>div</span>
<span id="cb23-11"><a href="#cb23-11"></a>          className<span class="op">=</span>{<span class="fu">twMerge</span>(</span>
<span id="cb23-12"><a href="#cb23-12"></a>            <span class="st">&quot;mx-4 max-w-2xl md:mx-auto&quot;</span><span class="op">,</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>            <span class="st">&quot;flex items-center justify-between&quot;</span><span class="op">,</span></span>
<span id="cb23-14"><a href="#cb23-14"></a>            <span class="st">&quot;text-lg font-bold text-white&quot;</span></span>
<span id="cb23-15"><a href="#cb23-15"></a>          )}</span>
<span id="cb23-16"><a href="#cb23-16"></a>        <span class="op">&gt;</span></span>
<span id="cb23-17"><a href="#cb23-17"></a>          <span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb23-18"><a href="#cb23-18"></a>            <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faFish} className<span class="op">=</span><span class="st">&quot;mr-1&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>            Header</span>
<span id="cb23-20"><a href="#cb23-20"></a>          <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb23-21"><a href="#cb23-21"></a>          <span class="op">&lt;</span>div<span class="op">&gt;</span>About<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb23-22"><a href="#cb23-22"></a>        <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb23-23"><a href="#cb23-23"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb23-24"><a href="#cb23-24"></a>    <span class="op">&lt;/</span>header<span class="op">&gt;</span></span>
<span id="cb23-25"><a href="#cb23-25"></a>  )<span class="op">;</span></span>
<span id="cb23-26"><a href="#cb23-26"></a>}<span class="op">;</span></span>
<span id="cb23-27"><a href="#cb23-27"></a></span>
<span id="cb23-28"><a href="#cb23-28"></a><span class="im">export</span> <span class="im">default</span> Header<span class="op">;</span></span></code></pre></div>
      <p>上記は、主に <strong>第09行目</strong> から
      <strong>第16行目</strong>
      に編集を加えています。ここでは解説と可読性・保守性の都合で
      <code>twMerge</code>
      を使ってクラスを3分割して記述していますが、実際には
      <code>twMerge</code> を使わずに <code>className="..."</code>
      として全てのクラスを列挙可能です。</p>
      <p>まず、<strong>第12行目</strong> は、<code>max-w-2x</code>
      によって <span class="masked">div要素の最大幅</span> を 2xl
      (=672px) に設定しています。また、<code>mx-4</code> によって
      <strong>X方向 (左右) のマージン</strong> を 16px
      に設定しています。また、<code>md:mx-auto</code> によって画面幅が
      md (=768px)
      を超えるときに左右のマージンを自動に設定して、要素を水平方向に中央揃えにするようにしています。</p>
      <p><strong>第13行目</strong> は「<i class="fa-solid fa-fish"></i>
      Header」と「About」を <strong>左右の両端揃え</strong> かつ
      <strong>上下中央揃え</strong> にするための設定になります。</p>
      <p><strong>第14行目</strong> は「<i class="fa-solid fa-fish"></i>
      Header」と「About」の
      <strong>フォントスタイルに関する設定</strong> になります。</p>
      <p>Tailwind CSS
      のクラスの詳細については、生成AIを利用して学んでください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Tailwind CSS を使用している環境で、div要素に “flex items-center
      justify-between”
      というクラスが設定されていました。これらのクラスはどのようなレイアウト設定か解説してください。</p>
      </blockquote>
      <hr />
      <p>次に <code>src/app/layout.tsx</code>
      を次のように編集してください。</p>
      <div class="sourceCode" id="cb24"
      data-caption="src/app/layout.tsx (抜粋)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb24-1"><a href="#cb24-1"></a><span class="kw">const</span> RootLayout<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>Props<span class="op">&gt;</span> <span class="op">=</span> (props) <span class="kw">=&gt;</span> {</span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="kw">const</span> { children } <span class="op">=</span> props<span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="cf">return</span> (</span>
<span id="cb24-4"><a href="#cb24-4"></a>    <span class="op">&lt;</span>html lang<span class="op">=</span><span class="st">&quot;ja&quot;</span><span class="op">&gt;</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>      <span class="op">&lt;</span>body<span class="op">&gt;</span></span>
<span id="cb24-6"><a href="#cb24-6"></a>        <span class="op">&lt;</span>Header <span class="op">/&gt;</span></span>
<span id="cb24-7"><a href="#cb24-7"></a>        <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;mx-4 mt-2 max-w-2xl md:mx-auto&quot;</span><span class="op">&gt;</span>{children}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb24-8"><a href="#cb24-8"></a>      <span class="op">&lt;/</span>body<span class="op">&gt;</span></span>
<span id="cb24-9"><a href="#cb24-9"></a>    <span class="op">&lt;/</span>html<span class="op">&gt;</span></span>
<span id="cb24-10"><a href="#cb24-10"></a>  )<span class="op">;</span></span>
<span id="cb24-11"><a href="#cb24-11"></a>}<span class="op">;</span></span></code></pre></div>
      <p>開発モードでブログアプリを実行して、次のようなレイアウトになっていることを確認してください。</p>
      <figure>
      <img src="figs/06/app_05.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>また、Chrome
      のデベロッパーツールから、モバイル表示に切り替えてレイアウトを確認してください。</p>
      <figure>
      <img src="figs/06/app_06.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h3 data-number="5.2.1" id="演習-10分"><span
      class="header-section-number">5.2.1</span> 演習
      (<i class="fa-solid fa-stopwatch"></i> 10分)</h3>
      <p><code>Header.tsx</code>
      を次のように変更すると、どのようにレンダリングされるか確認してください。</p>
      <p><strong>(変更前)</strong></p>
      <div class="sourceCode" id="cb25"
      data-caption="src/app/_components/Header.tsx (抜粋・変更前)"
      data-startFrom="17"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript" style="counter-reset: source-line 16;"><span id="cb25-17"><a href="#cb25-17"></a><span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>  <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faFish} className<span class="op">=</span><span class="st">&quot;mr-1&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb25-19"><a href="#cb25-19"></a>  Header</span>
<span id="cb25-20"><a href="#cb25-20"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb25-21"><a href="#cb25-21"></a><span class="op">&lt;</span>div<span class="op">&gt;</span>About<span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code></pre></div>
      <p><strong>(変更後)</strong></p>
      <div class="sourceCode" id="cb26"
      data-caption="src/app/_components/Header.tsx (抜粋・変更後)"
      data-startFrom="17"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript" style="counter-reset: source-line 16;"><span id="cb26-17"><a href="#cb26-17"></a><span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb26-18"><a href="#cb26-18"></a>  <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faFish} className<span class="op">=</span><span class="st">&quot;mr-1&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb26-19"><a href="#cb26-19"></a>  Header</span>
<span id="cb26-20"><a href="#cb26-20"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb26-21"><a href="#cb26-21"></a><span class="op">&lt;</span>div<span class="op">&gt;</span>検索<span class="op">&lt;/</span>div<span class="op">&gt;</span>  {<span class="co">/* 追加 */</span>}</span>
<span id="cb26-22"><a href="#cb26-22"></a><span class="op">&lt;</span>div<span class="op">&gt;</span>About<span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code></pre></div>
      <p>さらに、次のようなレイアウトのヘッダとするためには、どのようにすればよいか考えて実装してみてください。</p>
      <figure>
      <img src="figs/06/app_07.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><a
      href="https://github.com/TakeshiWada1980/Programming3-2024/blob/main/docs/codes/06/code01.tsx"><i class="fa-solid fa-person-chalkboard"></i>
      上記レイアウトの実装例</a></p>
      <p>変更後は、一旦、元の状態に戻しておいてください。以降の解説は、元の状態を前提としたものになります。</p>
      <h1 data-number="6" id="ページの追加"><span
      class="header-section-number">6</span> ページの追加</h1>
      <p>ここでは、アプリに以下のような「<strong>About
      (自己紹介)</strong>」のページを追加し、<span
      class="masked">サイト内外へのハイパーリンク</span>を作成する方法、<span
      class="masked">画像を表示</span>
      する方法などについて学びます。</p>
      <figure>
      <img src="figs/06/app_08.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="6.1" id="アバター画像の準備と配置"><span
      class="header-section-number">6.1</span>
      アバター画像の準備と配置</h2>
      <p>プロジェクトフォルダの <strong>直下</strong> に
      <code>public</code> という名前のフォルダを作成してください。</p>
      <p>Next.js において、プロジェクトフォルダの直下に作成した
      <code>public</code>
      という名前のフォルダは特別な意味を持ち、<strong>静的アセット</strong>
      (= <span
      class="masked">画像、PDF、Zipファイル、ファビコン、静的なHTML/CSS、robots.txt
      など</span>) を配置するために使用します。</p>
      <p>例えば、<code>public</code> に <code>test.png</code>
      という画像を配置しておけば <span
      class="masked"><code>http://localhost:3000/test.png</code></span>
      のようにリクエストすることで<strong>直接的に画像が取得できる</strong>ようになります。</p>
      <p>ここでは、<code>public</code> のなかに <code>images</code>
      というサブフォルダを作成して「About」のページで表示する<strong>アバター画像</strong>
      <code>avatar.png</code> を配置してください。画像は
      <strong>アスペクト比が「1:1」</strong>
      のものを用意してください。あるいは<a
      href="figs/06/avatar.png">こちらの画像</a>を利用してください
      (AIで生成した画像なので自由に利用可能です)。</p>
      <figure>
      <img src="figs/06/vscode_05.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>次のキーワードに基づき、JRPGスタイルのドット絵でアバター画像を作成してください。<br />
      【キャラクタ】<br />
      ・（キーワードを列挙）<br />
      【背景】<br />
      ・（キーワードを列挙）<br />
      【雰囲気】<br />
      ・（キーワードを列挙）</p>
      </blockquote>
      <h3 data-number="6.1.1" id="定着確認-4"><span
      class="header-section-number">6.1.1</span> 定着確認</h3>
      <ul>
      <li>Next.js
      において静的アセットを配置するためのフォルダは、どのような名前で、プロジェクトフォルダのどの位置に作成すべきか答えよ。
      <ul>
      <li>答え: <span class="masked">プロジェクトフォルダの直下に
      <code>public</code> という名前で配置</span></li>
      </ul></li>
      </ul>
      <h2 data-number="6.2" id="aboutコンポーネントの作成"><span
      class="header-section-number">6.2</span>
      Aboutコンポーネントの作成</h2>
      <p><code>/about</code> というURL (パス)
      でアクセス可能なコンテンツを作成するために、<code>src/app</code>
      フォルダのなかに<code>about</code> というサブフォルダを作成して
      <code>page.tsx</code> というファイルを新規作成してください。</p>
      <figure>
      <img src="figs/06/vscode_06.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p><code>page.tsx</code>
      を次のような内容で保存してください。そして、開発モードでアプリを起動して
      <code>http://localhost:3000/about</code>
      のURLで「About」のコンテンツにアクセスできることを確認してください。</p>
      <div class="sourceCode" id="cb27"
      data-caption="src/app/about/page.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb27-1"><a href="#cb27-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2"></a><span class="im">import</span> Image <span class="im">from</span> <span class="st">&quot;next/image&quot;</span><span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3"></a><span class="im">import</span> { twMerge } <span class="im">from</span> <span class="st">&quot;tailwind-merge&quot;</span><span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4"></a></span>
<span id="cb27-5"><a href="#cb27-5"></a><span class="kw">const</span> Page<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb27-6"><a href="#cb27-6"></a>  <span class="cf">return</span> (</span>
<span id="cb27-7"><a href="#cb27-7"></a>    <span class="op">&lt;</span>main<span class="op">&gt;</span></span>
<span id="cb27-8"><a href="#cb27-8"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;mb-5 text-2xl font-bold&quot;</span><span class="op">&gt;</span>About<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb27-9"><a href="#cb27-9"></a></span>
<span id="cb27-10"><a href="#cb27-10"></a>      <span class="op">&lt;</span>div</span>
<span id="cb27-11"><a href="#cb27-11"></a>        className<span class="op">=</span>{<span class="fu">twMerge</span>(</span>
<span id="cb27-12"><a href="#cb27-12"></a>          <span class="st">&quot;mx-auto mb-5 w-full md:w-2/3&quot;</span><span class="op">,</span></span>
<span id="cb27-13"><a href="#cb27-13"></a>          <span class="st">&quot;flex justify-center&quot;</span></span>
<span id="cb27-14"><a href="#cb27-14"></a>        )}</span>
<span id="cb27-15"><a href="#cb27-15"></a>      <span class="op">&gt;</span></span>
<span id="cb27-16"><a href="#cb27-16"></a>        <span class="op">&lt;</span>Image</span>
<span id="cb27-17"><a href="#cb27-17"></a>          src<span class="op">=</span><span class="st">&quot;/images/avatar.png&quot;</span></span>
<span id="cb27-18"><a href="#cb27-18"></a>          alt<span class="op">=</span><span class="st">&quot;Example Image&quot;</span></span>
<span id="cb27-19"><a href="#cb27-19"></a>          width<span class="op">=</span>{<span class="dv">350</span>}</span>
<span id="cb27-20"><a href="#cb27-20"></a>          height<span class="op">=</span>{<span class="dv">350</span>}</span>
<span id="cb27-21"><a href="#cb27-21"></a>          priority</span>
<span id="cb27-22"><a href="#cb27-22"></a>          className<span class="op">=</span><span class="st">&quot;rounded-full border-4 border-slate-500 p-1.5&quot;</span></span>
<span id="cb27-23"><a href="#cb27-23"></a>        <span class="op">/&gt;</span></span>
<span id="cb27-24"><a href="#cb27-24"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb27-25"><a href="#cb27-25"></a>    <span class="op">&lt;/</span>main<span class="op">&gt;</span></span>
<span id="cb27-26"><a href="#cb27-26"></a>  )<span class="op">;</span></span>
<span id="cb27-27"><a href="#cb27-27"></a>}<span class="op">;</span></span>
<span id="cb27-28"><a href="#cb27-28"></a></span>
<span id="cb27-29"><a href="#cb27-29"></a><span class="im">export</span> <span class="im">default</span> Page<span class="op">;</span></span></code></pre></div>
      <p>まず、上記の <strong>第08行目</strong>
      では「About」という文字列を出力しています。</p>
      <p>また <strong>第16行目</strong> から <strong>第23行目</strong>
      にかけて <code>Image</code>
      というコンポーネントを使って「<strong>アバター画像</strong>」を出力しています
      (<span
      class="masked">Imageコンポーネントは「第02行目」でインポートしています</span>)。ここでは
      Image の <code>src</code> に
      <code>"/images/avatar.png"</code>というパスを与えていることに注目してください。このパスは、プロジェクトフォルダの
      <code>/public/images/avatar.png</code> に対応しています。</p>
      <p>Image要素 をラップしている div要素
      では、<strong>レスポンシブデザインになるようにCSSを設定</strong>
      しています。実際にブラウザの画面幅を変化させ <span
      class="masked">アバター画像が適切に拡大縮小・レイアウトされること</span>
      を確認してください。<strong>CSSクラスの詳細</strong> (特に
      <code>w-full md:w-2/3</code> や <code>flex justify-center</code>
      など)
      については、生成AIを利用して解決してください。このあたりを理解しておくと、標準的なレイアウトはそこそこ組むことができます。</p>
      <p>なお、このファイルでは <strong>第05行目</strong> のように
      <code>Page</code>
      という名前で関数コンポーネントを作成していますが、<code>AboutPage</code>
      や <code>About</code> のような任意の名前にすることができます
      (ただし <span class="masked">パスカルケース</span>
      としてください)。</p>
      <h3 data-number="6.2.1" id="演習-10分-1"><span
      class="header-section-number">6.2.1</span> 演習
      (<i class="fa-solid fa-stopwatch"></i>10分)</h3>
      <p>Image コンポーネントの <code>width</code> と
      <code>height</code>
      を属性を次のように変更した場合、レスポンシブ対応を含めてレンダリング出力がどのように変化するか確認してください。確認の際には、デベロッパーツールのコンソールも同時に確認してください
      (エラー出力の有無など)。</p>
      <ul>
      <li><code>width={1000} height={1000}</code></li>
      <li><code>width={100} height={100}</code></li>
      <li><code>width={350} height={200}</code></li>
      <li><code>width={350} height={0}</code></li>
      <li><code>width={350}</code> (heightを設定しない)</li>
      <li>width も height も設定しない</li>
      </ul>
      <h2 data-number="6.3" id="ヘッダにaboutへのリンクを設定"><span
      class="header-section-number">6.3</span>
      ヘッダにAboutへのリンクを設定</h2>
      <p>ヘッダ右端に配置した「<strong>About</strong>」の文字列に
      <code>/about</code> に対する <strong>ハイパーリンク</strong>
      を設定していきます。つまり、ヘッダの「About」をクリックしたときに
      <code>/about</code> に画面遷移するように設定していきます。</p>
      <p><code>src/app/_components/Header.tsx</code> を開いて、まずは
      <span
      class="masked"><code>import Link from "next/link";</code></span>
      を追加し、その <strong>Linkコンポーネント</strong>
      を使って以下のようにJSXを編集してください。</p>
      <div class="sourceCode" id="cb28"
      data-caption="src/app/_components/Header.tsx (抜粋)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb28-1"><a href="#cb28-1"></a><span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb28-2"><a href="#cb28-2"></a>  <span class="op">&lt;</span>Link href<span class="op">=</span><span class="st">&quot;/&quot;</span><span class="op">&gt;</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>    <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faFish} className<span class="op">=</span><span class="st">&quot;mr-1&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>    Header</span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="op">&lt;/</span>Link<span class="op">&gt;</span></span>
<span id="cb28-6"><a href="#cb28-6"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb28-7"><a href="#cb28-7"></a><span class="op">&lt;</span>div<span class="op">&gt;</span></span>
<span id="cb28-8"><a href="#cb28-8"></a>  <span class="op">&lt;</span>Link href<span class="op">=</span><span class="st">&quot;/about&quot;</span><span class="op">&gt;</span>About<span class="op">&lt;/</span>Link<span class="op">&gt;</span></span>
<span id="cb28-9"><a href="#cb28-9"></a><span class="op">&lt;/</span>div<span class="op">&gt;</span></span></code></pre></div>
      <p>上記では「About」という文字列に <code>/about</code>
      のハイパーリンクを設定すると共に、「<i class="fa-solid fa-fish"></i>Header」に
      <code>/</code> へのハイパーリンクも設定しています。通常のHTMLでは
      <span
      class="masked"><code>&lt;a href="..."&gt;...&lt;/a&gt;</code></span>
      を使ってハイパーリンクを設定しますが、Next.js
      では、<strong>遷移先がアプリ内となるハイパーリンクには</strong>
      <code>next/link</code> からインポートする
      <strong>Linkコンポーネント</strong> を使用します。</p>
      <p>両差の違いについては、生成AIを利用して解決してください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Next.jsにおいて、「“next/link”
      からインポートしたLinkコンポーネントを使ってハイパーリンクを作成した場合」と「通常のaタグを使ってハイパーリンクを作成した場合」の違いについて教えてください。また、どのように使い分ければよいですか。</p>
      </blockquote>
      <p>開発モードでアプリを起動し、意図したようにハイパーリンクが機能することを確認してください。</p>
      <h2 data-number="6.4" id="next.jsにおける画像の表示"><span
      class="header-section-number">6.4</span>
      Next.jsにおける画像の表示</h2>
      <p>Next.js では、通常のHTMLの <code>&lt;img&gt;</code>
      タグではなく、<code>next/image</code> からインポートした <span
      class="masked">Imageという組み込みのコンポーネント</span>
      を使って画像を表示することが「<strong>推奨</strong>」されています。</p>
      <div class="sourceCode" id="cb29"
      data-caption="src/app/about/page.tsx (抜粋・Imageコンポーネントによる画像表示)"
      data-startFrom="16"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript" style="counter-reset: source-line 15;"><span id="cb29-16"><a href="#cb29-16"></a><span class="op">&lt;</span>Image</span>
<span id="cb29-17"><a href="#cb29-17"></a>  src<span class="op">=</span><span class="st">&quot;/images/avatar.png&quot;</span></span>
<span id="cb29-18"><a href="#cb29-18"></a>  alt<span class="op">=</span><span class="st">&quot;Example Image&quot;</span></span>
<span id="cb29-19"><a href="#cb29-19"></a>  width<span class="op">=</span>{<span class="dv">350</span>}</span>
<span id="cb29-20"><a href="#cb29-20"></a>  height<span class="op">=</span>{<span class="dv">350</span>}</span>
<span id="cb29-21"><a href="#cb29-21"></a>  priority</span>
<span id="cb29-22"><a href="#cb29-22"></a>  className<span class="op">=</span><span class="st">&quot;rounded-full border-4 border-slate-500 p-1.5&quot;</span></span>
<span id="cb29-23"><a href="#cb29-23"></a><span class="op">/&gt;</span></span></code></pre></div>
      <p>Next.js
      における「画像の取り扱い」は、大きく「<strong>ローカル画像</strong>」と「<strong>リモート画像</strong>」の2種類に分類されます。</p>
      <p>ここでの「<strong>ローカル画像</strong>」とは、プロジェクトフォルダ内に配置した画像のことで、これはさらに
      <span class="masked">publicフォルダに配置した静的画像</span> と
      <span class="masked">srcフォルダに配置した画像</span>
      に分けることができます。</p>
      <p>publicフォルダの画像を Imageコンポーネントで表示するときは
      (面倒ですが) <code>width</code> と <code>height</code>
      の<strong>指定が必須</strong>となります。一方で、srcフォルダに配置した画像は
      <strong>ビルド時に最適化</strong> され、<span
      class="masked">サイズ圧縮、フォーマット変換、複数解像度への対応など、パフォーマンスとレスポンシブ性を考慮した処理</span>
      が自動的に適用されます (Imageコンポーネントでは <code>width</code>
      と <code>height</code> の省略が可能です)。</p>
      <div class="note type-tips">
      <p><strong>publicフォルダの配置した画像へのアクセス</strong></p>
      <p>publicフォルダに配置した「画像」などのコンテンツは、URLを使ってダイレクトにアクセスができます。例えば、<code>/images/avatar.png</code>
      のように配置した画像は
      <code>https://localhost:3000/images/avatar.png</code>
      で取得することができます。</p>
      <p>一方で、srcフォルダに配置した画像については、上記のようにURLを使ってダイレクトにアクセスすることはできません。</p>
      </div>
      <p>また「<strong>リモート画像</strong>」とは「クラウドストレージ」や「外部のウェブサービス」など、<strong>アプリの実行時にプロジェクト外から取得する画像</strong>
      を指します。リモート画像を使用する場合は、画像を提供しているサービスの「ドメイン」を
      <code>next.config.mjs</code> に登録しておく必要があります。</p>
      <p>Imageコンポーネントに関連して詳しいことが知りたい学生は<a
      href="https://nextjs.org/docs/app/building-your-application/optimizing/images">公式ドキュメント</a>を確認するか、生成AIを利用して解決してください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>Next.js において、<code>next/image</code>
      からインポートした「Imageコンポーネント」を使用する際の注意点について教えてください。特に初心者がよくハマるポイントなどを教えてください。</p>
      </blockquote>
      <blockquote>
      <p>Next.js において、<code>&lt;img&gt;</code>
      タグではなく、<code>next/image</code>
      からインポートした「Imageコンポーネント」を使って画像を表示するメリットを教えてください。</p>
      </blockquote>
      <blockquote>
      <p>Next.js において、<code>src</code>
      フォルダに配置した画像については、ビルド時に最適化されると聞きました。具体的には、何のために、どのような処理が行われてるのか教えてください。</p>
      </blockquote>
      <h3 data-number="6.4.1" id="演習-宿題-30分"><span
      class="header-section-number">6.4.1</span> 演習 (宿題:
      <i class="fa-solid fa-stopwatch"></i> 30分)</h3>
      <p>Aboutページについて、「コンテンツ」と「デザイン」を各自で自由に設計して実装してください。</p>
      <p><a
      href="https://github.com/TakeshiWada1980/Programming3-2024/blob/main/docs/codes/06/code02.tsx"><i class="fa-solid fa-person-chalkboard"></i>
      実装例</a>(レスポンシブデザイン対応)</p>
      <h3 data-number="6.4.2" id="定着確認-5"><span
      class="header-section-number">6.4.2</span> 定着確認</h3>
      <ul>
      <li>Next.js において <code>&lt;a&gt;</code>
      タグの代わりに使用される組み込みコンポーネントをインポートするための文を答えよ。このコンポーネントは、プリフェッチやクライアントサイドルーティングなどの最適化機能を提供する。
      <ul>
      <li>答え: <span
      class="masked"><code>import Link from "next/link";</code></span></li>
      </ul></li>
      <li>Next.js において <code>&lt;img&gt;</code>
      タグの代わりに使用される組み込みコンポーネントをインポートするための文を答えよ。このコンポーネントは、自動画像最適化、遅延読み込み、サイズ最適化などの機能を提供する。
      <ul>
      <li>答え: <span
      class="masked"><code>import Image from "next/image";</code></span></li>
      </ul></li>
      </ul>
      <h1 data-number="7" id="投稿記事の一覧"><span
      class="header-section-number">7</span> 投稿記事の一覧</h1>
      <p>アプリのトップページ (<code>/</code>)
      にアクセスしたとき、次のように「<strong>投稿記事の一覧</strong>」が表示されるような機能を実装していきます。記事の「<strong>タイトル</strong>」と「改行タグが反映された<strong>本文</strong>」に加えて、<span
      class="masked">「投稿日」と「記事のカテゴリ (複数)」</span>
      についても表示されるように実装していきます。</p>
      <figure>
      <img src="figs/06/app_09.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="7.1" id="実装の方針"><span
      class="header-section-number">7.1</span> 実装の方針</h2>
      <p>ブログの投稿記事は、(最終的には)
      <strong>ウェブAPIを叩いて「JSON形式」でバックエンドから取得するように実装</strong>します。具体的には、次のような
      <strong>JSONリテラル (文字列化されたJSONデータ)</strong>
      をバックエンド経由でデータベースから取得することを想定します。DBは、リレーショナルデータベースを想定します。</p>
      <div class="sourceCode" id="cb30"
      data-caption="投稿記事一覧のデータサンプル (JSON文字列形式)"><pre
      class="sourceCode numberSource json numberLines"><code class="sourceCode json"><span id="cb30-1"><a href="#cb30-1"></a><span class="ot">[</span></span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="fu">{</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;24f932b8-231b-429b-b9dc-569f07ba16a7&quot;</span><span class="fu">,</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>    <span class="dt">&quot;createdAt&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-10-24T22:37:17.367Z&quot;</span><span class="fu">,</span></span>
<span id="cb30-5"><a href="#cb30-5"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;投稿2&quot;</span><span class="fu">,</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>    <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;夏は夜。&lt;br/&gt;月のころは...(略)&quot;</span><span class="fu">,</span></span>
<span id="cb30-7"><a href="#cb30-7"></a>    <span class="dt">&quot;coverImage&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb30-8"><a href="#cb30-8"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://w1980.blob.core.windows.net/pg3/cover-img-green.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb30-9"><a href="#cb30-9"></a>      <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">768</span><span class="fu">,</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>      <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">1365</span></span>
<span id="cb30-11"><a href="#cb30-11"></a>    <span class="fu">},</span></span>
<span id="cb30-12"><a href="#cb30-12"></a>    <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb30-13"><a href="#cb30-13"></a>      <span class="fu">{</span></span>
<span id="cb30-14"><a href="#cb30-14"></a>        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;587ac4ab-92de-450c-9423-5e091d16ecb5&quot;</span><span class="fu">,</span></span>
<span id="cb30-15"><a href="#cb30-15"></a>        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;TypeScript&quot;</span></span>
<span id="cb30-16"><a href="#cb30-16"></a>      <span class="fu">}</span></span>
<span id="cb30-17"><a href="#cb30-17"></a>    <span class="ot">]</span></span>
<span id="cb30-18"><a href="#cb30-18"></a>  <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb30-19"><a href="#cb30-19"></a>  <span class="fu">{</span></span>
<span id="cb30-20"><a href="#cb30-20"></a>    <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;36b7c693-4cce-4d73-afa3-acb54a404290&quot;</span><span class="fu">,</span></span>
<span id="cb30-21"><a href="#cb30-21"></a>    <span class="dt">&quot;createdAt&quot;</span><span class="fu">:</span> <span class="st">&quot;2024-10-22T11:22:34.684Z&quot;</span><span class="fu">,</span></span>
<span id="cb30-22"><a href="#cb30-22"></a>    <span class="dt">&quot;title&quot;</span><span class="fu">:</span> <span class="st">&quot;投稿1&quot;</span><span class="fu">,</span></span>
<span id="cb30-23"><a href="#cb30-23"></a>    <span class="dt">&quot;content&quot;</span><span class="fu">:</span> <span class="st">&quot;春はあけぼの。&lt;br/&gt;やうやう白くなりゆく...(略)&quot;</span><span class="fu">,</span></span>
<span id="cb30-24"><a href="#cb30-24"></a>    <span class="dt">&quot;coverImage&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb30-25"><a href="#cb30-25"></a>      <span class="dt">&quot;url&quot;</span><span class="fu">:</span> <span class="st">&quot;https://w1980.blob.core.windows.net/pg3/cover-img-purple.jpg&quot;</span><span class="fu">,</span></span>
<span id="cb30-26"><a href="#cb30-26"></a>      <span class="dt">&quot;height&quot;</span><span class="fu">:</span> <span class="dv">768</span><span class="fu">,</span></span>
<span id="cb30-27"><a href="#cb30-27"></a>      <span class="dt">&quot;width&quot;</span><span class="fu">:</span> <span class="dv">1365</span></span>
<span id="cb30-28"><a href="#cb30-28"></a>    <span class="fu">},</span></span>
<span id="cb30-29"><a href="#cb30-29"></a>    <span class="dt">&quot;categories&quot;</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb30-30"><a href="#cb30-30"></a>      <span class="fu">{</span></span>
<span id="cb30-31"><a href="#cb30-31"></a>        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;587ac4ab-92de-450c-9423-5e091d16ecb5&quot;</span><span class="fu">,</span></span>
<span id="cb30-32"><a href="#cb30-32"></a>        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;TypeScript&quot;</span></span>
<span id="cb30-33"><a href="#cb30-33"></a>      <span class="fu">}</span><span class="ot">,</span></span>
<span id="cb30-34"><a href="#cb30-34"></a>      <span class="fu">{</span></span>
<span id="cb30-35"><a href="#cb30-35"></a>        <span class="dt">&quot;id&quot;</span><span class="fu">:</span> <span class="st">&quot;5cf22131-bac8-4bd0-be8e-757cec2bcc9a&quot;</span><span class="fu">,</span></span>
<span id="cb30-36"><a href="#cb30-36"></a>        <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;React&quot;</span></span>
<span id="cb30-37"><a href="#cb30-37"></a>      <span class="fu">}</span></span>
<span id="cb30-38"><a href="#cb30-38"></a>    <span class="ot">]</span></span>
<span id="cb30-39"><a href="#cb30-39"></a>  <span class="fu">}</span></span>
<span id="cb30-40"><a href="#cb30-40"></a><span class="ot">]</span></span></code></pre></div>
      <p>ただし、ウェブAPIからの取得の前に、まずはローカルに配置した
      <code>_mock/dummyPosts.ts</code>
      から上記の取得することからはじめていきます。</p>
      <p>ここで、以下の2点に注意してください。</p>
      <ol type="1">
      <li><p><code>"createdAt"</code>
      は記事が作成され日時を「<strong>ISO8601形式</strong>」で表したものですが、末尾に
      <code>Z</code> が付いている点です。この末尾の Z は、その日時が
      <span class="masked">UTC（協定世界時）であること</span>
      を示しています。そのため、「投稿1」の
      <code>"2024-10-22T11:22:34.684Z"</code> は、日本時間 (JST)
      でいえば<span class="masked">2024-10-25 07:37:17.367</span>
      を意味します。</p></li>
      <li><p><code>"content":</code> には
      <strong>HTMLタグを含んだ文字列</strong>
      が格納されていま1す。ブログ記事中の「改行」を画面に反映させるためには
      <strong>HTMLタグを有効化する必要</strong>がありますが、許可するタグを制限し適切なサニタイズ処理を実装しないと
      <span
      class="masked">XSS（クロスサイトスクリプティング）攻撃のリスク</span>
      が生じます。</p></li>
      </ol>
      <h2 data-number="7.2" id="投稿記事のモックを生成"><span
      class="header-section-number">7.2</span>
      投稿記事のモックを生成</h2>
      <p>ソフトウェア開発において、<strong>実際のデータやシステムの振る舞いを模倣した仮のオブジェクトやデータ</strong>
      のことを <span class="masked">モック (Mock)</span>
      といいます。このブログアプリにおいても、最終的にはウェブAPIを使用してバックエンドから投稿記事のデータを取得しますが、ここではまずは「モック」を作成し、それを利用してデータを取得します。</p>
      <p>モックを作成するにあたり、TypeScript環境では先に「<strong>型</strong>」を定義する必要があります。<code>src/app</code>
      フォルダのなかに <code>_types</code>
      フォルダを作成して、各型を定義した「Category.ts」「CoverImage.ts」「Post.ts」という3つのファイルを作成してしてください。</p>
      <p>なお、型ファイルの名前は、慣例に従って
      <strong>パスカルケース</strong> で命名してください。また、これらは
      (JSXを含まない) 純粋なTypeScriptファイルなので <span
      class="masked">拡張子は「<code>.tsx</code>」ではなく「<code>.ts</code>」</span>
      としてください (React関数コンポーネントのように
      <strong>JSX構文を使うファイル</strong> だけを拡張子
      <code>.tsx</code> としてください)。</p>
      <div class="sourceCode" id="cb31"
      data-caption="src/app/_types/Category.ts (カテゴリ情報の型定義)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb31-1"><a href="#cb31-1"></a><span class="im">export type</span> Category <span class="op">=</span> {</span>
<span id="cb31-2"><a href="#cb31-2"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb31-3"><a href="#cb31-3"></a>  name<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb31-4"><a href="#cb31-4"></a>}<span class="op">;</span></span></code></pre></div>
      <div class="sourceCode" id="cb32"
      data-caption="src/app/_types/CoverImage.ts (カバーイメージ情報の型定義)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb32-1"><a href="#cb32-1"></a><span class="im">export type</span> CoverImage <span class="op">=</span> {</span>
<span id="cb32-2"><a href="#cb32-2"></a>  url<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>  width<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>  height<span class="op">:</span> <span class="dt">number</span><span class="op">;</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>}<span class="op">;</span></span></code></pre></div>
      <div class="sourceCode" id="cb33"
      data-caption="src/app/_types/Post.ts (投稿記事の型定義)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb33-1"><a href="#cb33-1"></a><span class="im">import</span> { Category } <span class="im">from</span> <span class="st">&quot;./Category&quot;</span><span class="op">;</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="im">import</span> { CoverImage } <span class="im">from</span> <span class="st">&quot;./CoverImage&quot;</span><span class="op">;</span></span>
<span id="cb33-3"><a href="#cb33-3"></a></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="im">export type</span> Post <span class="op">=</span> {</span>
<span id="cb33-5"><a href="#cb33-5"></a>  id<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb33-6"><a href="#cb33-6"></a>  title<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>  content<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb33-8"><a href="#cb33-8"></a>  createdAt<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9"></a>  categories<span class="op">:</span> Category[]<span class="op">;</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>  coverImage<span class="op">:</span> CoverImage<span class="op">;</span></span>
<span id="cb33-11"><a href="#cb33-11"></a>}<span class="op">;</span></span></code></pre></div>
      <p>次に <code>src/app</code> フォルダのなかに <code>_mocks</code>
      フォルダを作成し、そこに <code>dummyPosts.ts</code>
      というファイルを作成してください。そして、投稿記事の一覧を格納した
      <code>dummyPosts</code> というオブジェクトを作成してください。</p>
      <ul>
      <li><code>dummyPosts.ts</code> のコードは<a
      href="https://github.com/TakeshiWada1980/Programming3-2024/blob/main/docs/codes/06/dummyPosts.ts">こちら<i class="fa-solid fa-person-chalkboard"></i></a>を参照してください。</li>
      </ul>
      <p>最終的に、次のようなフォルダ構成になっていることを確認してください。</p>
      <figure>
      <img src="figs/06/vscode_07.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <h2 data-number="7.3" id="記事一覧の表示"><span
      class="header-section-number">7.3</span> 記事一覧の表示</h2>
      <p>アプリのトップページ (<code>/</code>)
      にアクセスしたとき、次のように「<strong>投稿記事の一覧</strong>」が表示されるようにコンポーネントを追加・実装していきます。</p>
      <figure>
      <img src="figs/06/app_09.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>まずは、<code>src/app/_components</code> のなかに、次のような
      <code>PostSummary.tsx</code>
      を作成してください。PostSummaryコンポーネントは <span
      class="masked">投稿記事の「概要」を表示するためのコンポーネント</span>
      になります。</p>
      <div class="sourceCode" id="cb34"
      data-caption="src/app/_components/PostSummary.tsx (投稿記事の概要を表示するコンポーネント)"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb34-1"><a href="#cb34-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="im">import</span> <span class="im">type</span> { Post } <span class="im">from</span> <span class="st">&quot;@/app/_types/Post&quot;</span><span class="op">;</span></span>
<span id="cb34-3"><a href="#cb34-3"></a></span>
<span id="cb34-4"><a href="#cb34-4"></a><span class="kw">type</span> Props <span class="op">=</span> {</span>
<span id="cb34-5"><a href="#cb34-5"></a>  post<span class="op">:</span> Post<span class="op">;</span></span>
<span id="cb34-6"><a href="#cb34-6"></a>}<span class="op">;</span></span>
<span id="cb34-7"><a href="#cb34-7"></a></span>
<span id="cb34-8"><a href="#cb34-8"></a><span class="kw">const</span> PostSummary<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span><span class="op">&lt;</span>Props<span class="op">&gt;</span> <span class="op">=</span> (props) <span class="kw">=&gt;</span> {</span>
<span id="cb34-9"><a href="#cb34-9"></a>  <span class="kw">const</span> { post } <span class="op">=</span> props<span class="op">;</span></span>
<span id="cb34-10"><a href="#cb34-10"></a>  <span class="cf">return</span> (</span>
<span id="cb34-11"><a href="#cb34-11"></a>    <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;border border-slate-400 p-3&quot;</span><span class="op">&gt;</span></span>
<span id="cb34-12"><a href="#cb34-12"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;font-bold&quot;</span><span class="op">&gt;</span>{post<span class="op">.</span><span class="at">title</span>}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb34-13"><a href="#cb34-13"></a>      <span class="op">&lt;</span>div<span class="op">&gt;</span>{post<span class="op">.</span><span class="at">content</span>}<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb34-14"><a href="#cb34-14"></a>    <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb34-15"><a href="#cb34-15"></a>  )<span class="op">;</span></span>
<span id="cb34-16"><a href="#cb34-16"></a>}<span class="op">;</span></span>
<span id="cb34-17"><a href="#cb34-17"></a></span>
<span id="cb34-18"><a href="#cb34-18"></a><span class="im">export</span> <span class="im">default</span> PostSummary<span class="op">;</span></span></code></pre></div>
      <p>この PostSummaryコンポーネント は Props
      (<strong>第04行目</strong> から <strong>第06行目</strong>)
      として、<strong>(単一の) 投稿記事</strong> を受け取り、その
      <code>title</code> と <code>content</code>
      を表示するコンポーネントとなっています。</p>
      <p>次に、上記で作成した PostSummaryコンポーネント を呼び出すように
      <code>src/app/page.tsx</code> (= <code>/</code> にアクセスしたとき
      (トップページにアクセスしたとき) に読み込まれるファイル)
      を以下のように編集してください。<strong>第04行目</strong>
      で「PostSummaryコンポーネント」をインポートして、<strong>第41行目</strong>から<strong>第43行目</strong>
      で <span class="masked">mapメソッド</span>
      のなかで、呼び出しています。この処理の理解が怪しいときは<a
      href="lecture04.html#todolistコンポーネントのブラッシュアップ">Todoアプリの解説</a>に戻って復習してください。</p>
      <div class="sourceCode" id="cb35"
      data-caption="src/app/page.tsx"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb35-1"><a href="#cb35-1"></a><span class="st">&quot;use client&quot;</span><span class="op">;</span></span>
<span id="cb35-2"><a href="#cb35-2"></a><span class="im">import</span> { useState<span class="op">,</span> useEffect } <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></span>
<span id="cb35-3"><a href="#cb35-3"></a><span class="im">import</span> <span class="im">type</span> { Post } <span class="im">from</span> <span class="st">&quot;@/app/_types/Post&quot;</span><span class="op">;</span></span>
<span id="cb35-4"><a href="#cb35-4"></a><span class="im">import</span> PostSummary <span class="im">from</span> <span class="st">&quot;@/app/_components/PostSummary&quot;</span><span class="op">;</span></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="im">import</span> dummyPosts <span class="im">from</span> <span class="st">&quot;@/app/_mocks/dummyPosts&quot;</span><span class="op">;</span></span>
<span id="cb35-6"><a href="#cb35-6"></a><span class="im">import</span> { FontAwesomeIcon } <span class="im">from</span> <span class="st">&quot;@fortawesome/react-fontawesome&quot;</span><span class="op">;</span></span>
<span id="cb35-7"><a href="#cb35-7"></a><span class="im">import</span> { faSpinner } <span class="im">from</span> <span class="st">&quot;@fortawesome/free-solid-svg-icons&quot;</span><span class="op">;</span></span>
<span id="cb35-8"><a href="#cb35-8"></a></span>
<span id="cb35-9"><a href="#cb35-9"></a><span class="kw">const</span> Page<span class="op">:</span> React<span class="op">.</span><span class="at">FC</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb35-10"><a href="#cb35-10"></a>  <span class="co">// 投稿データを「状態」として管理 (初期値はnull)</span></span>
<span id="cb35-11"><a href="#cb35-11"></a>  <span class="kw">const</span> [posts<span class="op">,</span> setPosts] <span class="op">=</span> <span class="fu">useState</span><span class="op">&lt;</span>Post[] <span class="op">|</span> <span class="dt">null</span><span class="op">&gt;</span>(<span class="kw">null</span>)<span class="op">;</span></span>
<span id="cb35-12"><a href="#cb35-12"></a></span>
<span id="cb35-13"><a href="#cb35-13"></a>  <span class="co">// コンポーネントが読み込まれたときに「1回だけ」実行する処理</span></span>
<span id="cb35-14"><a href="#cb35-14"></a>  <span class="fu">useEffect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb35-15"><a href="#cb35-15"></a>    <span class="co">// 本来はウェブAPIを叩いてデータを取得するが、まずはモックデータを使用</span></span>
<span id="cb35-16"><a href="#cb35-16"></a>    <span class="co">// (ネットからのデータ取得をシミュレートして１秒後にデータをセットする)</span></span>
<span id="cb35-17"><a href="#cb35-17"></a>    <span class="kw">const</span> timer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb35-18"><a href="#cb35-18"></a>      <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">&quot;ウェブAPIからデータを取得しました (虚言)&quot;</span>)<span class="op">;</span></span>
<span id="cb35-19"><a href="#cb35-19"></a>      <span class="fu">setPosts</span>(dummyPosts)<span class="op">;</span></span>
<span id="cb35-20"><a href="#cb35-20"></a>    }<span class="op">,</span> <span class="dv">1000</span>)<span class="op">;</span> <span class="co">// 1000ミリ秒 = 1秒</span></span>
<span id="cb35-21"><a href="#cb35-21"></a></span>
<span id="cb35-22"><a href="#cb35-22"></a>    <span class="co">// データ取得の途中でページ遷移したときにタイマーを解除する処理</span></span>
<span id="cb35-23"><a href="#cb35-23"></a>    <span class="cf">return</span> () <span class="kw">=&gt;</span> <span class="pp">clearTimeout</span>(timer)<span class="op">;</span></span>
<span id="cb35-24"><a href="#cb35-24"></a>  }<span class="op">,</span> [])<span class="op">;</span></span>
<span id="cb35-25"><a href="#cb35-25"></a></span>
<span id="cb35-26"><a href="#cb35-26"></a>  <span class="co">// 投稿データが取得できるまでは「Loading...」を表示</span></span>
<span id="cb35-27"><a href="#cb35-27"></a>  <span class="cf">if</span> (<span class="op">!</span>posts) {</span>
<span id="cb35-28"><a href="#cb35-28"></a>    <span class="cf">return</span> (</span>
<span id="cb35-29"><a href="#cb35-29"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;text-gray-500&quot;</span><span class="op">&gt;</span></span>
<span id="cb35-30"><a href="#cb35-30"></a>        <span class="op">&lt;</span>FontAwesomeIcon icon<span class="op">=</span>{faSpinner} className<span class="op">=</span><span class="st">&quot;mr-1 animate-spin&quot;</span> <span class="op">/&gt;</span></span>
<span id="cb35-31"><a href="#cb35-31"></a>        Loading<span class="op">...</span></span>
<span id="cb35-32"><a href="#cb35-32"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb35-33"><a href="#cb35-33"></a>    )<span class="op">;</span></span>
<span id="cb35-34"><a href="#cb35-34"></a>  }</span>
<span id="cb35-35"><a href="#cb35-35"></a></span>
<span id="cb35-36"><a href="#cb35-36"></a>  <span class="co">// 投稿データが取得できたら「投稿記事の一覧」を出力</span></span>
<span id="cb35-37"><a href="#cb35-37"></a>  <span class="cf">return</span> (</span>
<span id="cb35-38"><a href="#cb35-38"></a>    <span class="op">&lt;</span>main<span class="op">&gt;</span></span>
<span id="cb35-39"><a href="#cb35-39"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;mb-2 text-2xl font-bold&quot;</span><span class="op">&gt;</span>Main<span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb35-40"><a href="#cb35-40"></a>      <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;space-y-3&quot;</span><span class="op">&gt;</span></span>
<span id="cb35-41"><a href="#cb35-41"></a>        {posts<span class="op">.</span><span class="fu">map</span>((post) <span class="kw">=&gt;</span> (</span>
<span id="cb35-42"><a href="#cb35-42"></a>          <span class="op">&lt;</span>PostSummary key<span class="op">=</span>{post<span class="op">.</span><span class="at">id</span>} post<span class="op">=</span>{post} <span class="op">/&gt;</span></span>
<span id="cb35-43"><a href="#cb35-43"></a>        ))}</span>
<span id="cb35-44"><a href="#cb35-44"></a>      <span class="op">&lt;/</span>div<span class="op">&gt;</span></span>
<span id="cb35-45"><a href="#cb35-45"></a>    <span class="op">&lt;/</span>main<span class="op">&gt;</span></span>
<span id="cb35-46"><a href="#cb35-46"></a>  )<span class="op">;</span></span>
<span id="cb35-47"><a href="#cb35-47"></a>}<span class="op">;</span></span>
<span id="cb35-48"><a href="#cb35-48"></a></span>
<span id="cb35-49"><a href="#cb35-49"></a><span class="im">export</span> <span class="im">default</span> Page<span class="op">;</span></span></code></pre></div>
      <p>または、ここでは <strong>第14行目</strong> からの
      <code>useEffect</code>
      が処理において極めて重要な意味を持ちます。<code>useEffect</code>
      を使用することで、コンポーネントが読み込まれたときに
      <strong>1回だけ</strong> <span
      class="masked">ウェブAPIをコールして (現時点はモックから)
      データが取得される仕組み</span> をつくっています。</p>
      <p>もし、<code>useEffect</code> を
      <strong>使用せずに処理を実装</strong>をすると、次のように <span
      class="masked">無限ループ</span> が発生します。</p>
      <ol type="1">
      <li>ウェブAPIをコールしてデータを取得</li>
      <li>取得したデータを <code>setPosts</code> に与えて状態を更新
      (state更新)</li>
      <li>状態が更新されたので再レンダリング
      (=<strong>Page関数が再実行❗</strong>)</li>
      <li>ウェブAPIをコールしてデータを取得</li>
      <li>取得したデータを <code>setPosts</code> に与えて状態を更新
      (state更新)</li>
      <li>状態が更新されたので再レンダリング
      (=<strong>Page関数が再実行❗</strong>)</li>
      <li><strong>😱😱無限ループ😱😱</strong></li>
      </ol>
      <p>このような無限ループは、<strong>API使用制限（Rate
      Limit）への抵触</strong>、<span
      class="masked">従量課金制のAPIを使用している場合は予期せぬ高額請求
      (いわゆるAPI破産やクラウド破産)</span>、<strong>サーバへの過剰な負荷</strong>
      につながるため、十分に注意してください。</p>
      <ul>
      <li><a
      href="https://www.google.com/search?q=クラウド破産">api破産/クラウド破産💀</a></li>
      </ul>
      <p>なお、<a
      href="lecture05.html#localstorage-を利用した保存機能の実装">前回講義の</a>
      でも紹介しましたが <code>useEffect</code> については「<a
      href="https://www.youtube.com/watch?v=4INjmxXaPxU">初心者向け！ReactのuseEffectが何してるのか20分で説明</a>」の動画、ウェブ検索、生成AIを活用して理解を深めてください。</p>
      <h2 data-number="7.4" id="動作確認-1"><span
      class="header-section-number">7.4</span> 動作確認</h2>
      <p>ここまでの実装について、開発モードで実行確認する次のような出力が得られることが分かります。つまり、HTMLタグが
      <span class="masked">サニタイズ (無害化)</span>
      され出力されていることが確認できます。</p>
      <figure>
      <img src="figs/06/app_10.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <p>Next.js (React) では、JSXで
      <code>&lt;div&gt;{post.content}&lt;/div&gt;</code>
      のように記述すると、<strong>悪意あるスクリプトの実行を防ぐために</strong>
      コンテンツが自動的にサニタイズ (無害化・エスケープ処理)
      されます。</p>
      <p>ただし、<strong>信頼できるコンテンツを HTML
      として意図的に描画したい場合</strong>は、次のように
      <code>dangerouslySetInnerHTML</code> 属性を使用します。</p>
      <div class="sourceCode" id="cb36"
      data-caption="HTMLをサニタイズせずに出力する例"><pre
      class="sourceCode numberSource ts numberLines"><code class="sourceCode typescript"><span id="cb36-1"><a href="#cb36-1"></a><span class="co">// &lt;div&gt;{post.content}&lt;/div&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2"></a><span class="op">&lt;</span>div dangerouslySetInnerHTML<span class="op">=</span>{{ __html<span class="op">:</span> post<span class="op">.</span><span class="at">content</span> }} <span class="op">/&gt;</span></span></code></pre></div>
      <p>実際に、<code>src/app/_components/PostSummary.tsx</code>
      を書き換えて、<code>post.content</code> の
      <code>&lt;br/&gt;</code>
      が「<strong>改行</strong>」に置き換わって表示されることを確認してください。</p>
      <p>なお、改行や太字/斜線/下線などの
      <strong>特定のタグだけを許可</strong> し、それ以外のタグ (例えば
      <code>&lt;script&gt;</code> などの危険なタグ) は削除したいときには
      <code>dompurify</code>
      (Next.jsでバックエンドでも使用する可能性があるのであれば
      <code>isomorphic-dompurify</code>)
      などの<strong>ライブラリを使用</strong>します。詳しい使い方は生成AIなどで調べてください。</p>
      <p><strong>(プロンプト例)</strong></p>
      <blockquote>
      <p>TypeScript を採用した Next.js
      環境において、<code>isomorphic-dompurify</code>
      を利用し、HTMLコンテンツから「改行」と「太字・斜線・下線」以外のタグを削除したいです。どのようにすればよいですか。</p>
      </blockquote>
      <h3 data-number="7.4.1" id="定着確認-6"><span
      class="header-section-number">7.4.1</span> 定着確認</h3>
      <ul>
      <li>ウェブアプリにおいて、HTMLコンテンツに含まれる可能性のある「悪意のあるスクリプト」や「HTMLタグ」を無害化し、XSS攻撃を防ぐための処理のことを何というか答えよ。英語またはカタカナで答えること。
      <ul>
      <li>答え: <span class="masked">「サニタイズ
      (サニタイゼーション)」「sanitize (sanitization)」</span></li>
      </ul></li>
      <li>「XSS攻撃」とは何の略か答えよ。英語またはカタカナで答えること。
      <ul>
      <li>答え: <span
      class="masked">「クロスサイト・スクリプティング攻撃」「Cross-Site
      Scripting攻撃」</span></li>
      </ul></li>
      </ul>
      <h3 data-number="7.4.2" id="演習-宿題-80分"><span
      class="header-section-number">7.4.2</span> 演習 (宿題:
      <i class="fa-solid fa-stopwatch"></i> 80分)</h3>
      <p>次のように「投稿日」と「カテゴリ」が表示されるように
      <code>src/app/_components/PostSummary.tsx</code>
      をアップデートしてください。<strong>「レイアウト」や「デザイン
      (装飾)」は各自で自由に設計してください</strong>。必要に応じて
      <code>dummyPosts.ts</code> にデータを追加してください。</p>
      <ul>
      <li>必要なライブラリ (<code>dayjs</code> や
      <code>isomorphic-dompurify</code> など)
      があれば適宜追加してください。</li>
      <li>本文は <strong>最大で「3行」まで表示</strong>
      されるようにしてください (4行以上になる場合は <code>...</code>
      で省略する)。
      <ul>
      <li>ヒント: <span class="masked">Tailwind CSS の
      <code>line-clamp-3</code> を利用すると便利です</span></li>
      </ul></li>
      <li><strong>EX (任意)</strong>: <code>src/app/page.tsx</code>
      にボタンなどのUIを追加し、「日付の新しい順」「日付の古い順」に記事概要を並び替える処理を実装してください。</li>
      <li><strong>EX (任意)</strong>: 同様に、カテゴリによるフィルタ機能
      (絞り込み機能) を実装してください。例えば <code>TypeScript</code>
      のカテゴリタグがついている記事だけを一覧で表示するなど。</li>
      </ul>
      <figure>
      <img src="figs/06/app_09.png" alt="img" />
      <figcaption aria-hidden="true">img</figcaption>
      </figure>
      <ul>
      <li>実装例は<a
      href="https://github.com/TakeshiWada1980/Programming3-2024/blob/main/docs/codes/06/code03.tsx">こちら<i class="fa-solid fa-person-chalkboard"></i></a>を参照してください。</li>
      </ul>
      <!-- ---------------------------------------- -->
    </main>

    <footer class="markdown-body">
      <p><a href="https://takeshiwada1980.github.io/Programming3-2024/">講義資料のIndexに移動</a></p>
    </footer>

    <script>
      window.onload = function () {
        // ナビゲーション関連
        let openBtn = document.getElementsByClassName("openbtn")[0];
        let navPnl = document.getElementById("g-nav");
        openBtn.onclick = () => {
          openBtn.classList.toggle("active");
          navPnl.classList.toggle("panelactive");
        };

        let items = navPnl.getElementsByTagName("a");
        Array.from(items).forEach((item) => {
          item.onclick = () => {
            openBtn.classList.toggle("active");
            navPnl.classList.toggle("panelactive");
          };
        });

        // マスク処理
        let maskedSpans = document.getElementsByClassName("masked");
        Array.from(maskedSpans).forEach((span) => {
          span.onclick = () => {
            span.classList.toggle("open");
          };
        });

        // data-startfrom 属性の行番号カウンタのリセット
        document.querySelectorAll("div.sourceCode").forEach(function (div) {
          var startFrom = div.getAttribute("data-startfrom");
          if (startFrom != null) {
            div.style.counterReset = "pg-line " + (startFrom - 1);
          }
        });

        // 画像にリンクを付与
        // let images = document.querySelectorAll("figure img");
        // Array.from(images).forEach((img) => {
        //   img.onclick = () => {
        //     location.href = img.getAttribute("src");
        //   };
        // });
      };
    </script>
  </body>
</html>
